(function(){var e={3209:function(e,t,a){"use strict";var r=a(9003),s=a(2483);const o=(0,r._)("h3",null," 机器人通信Dome(通信方式不要按照我这种来，最好采用通讯池的方式，接收和发送都在通讯池中处理) ",-1),n=(0,r._)("p",null,"通讯格式为:帧头、数据长度、指令、数据、校验位",-1),i=(0,r._)("p",null,null,-1),l=(0,r._)("p",null,null,-1);function c(e,t,a,s,c,u){const h=(0,r.up)("el-button");return(0,r.wg)(),(0,r.iD)("div",null,[o,n,(0,r.Wm)(h,{type:"primary",onClick:t[0]||(t[0]=e=>u.GO_Convoy_Seven())},{default:(0,r.w5)((()=>[(0,r.Uk)("变七")])),_:1}),(0,r.Wm)(h,{type:"primary",onClick:t[1]||(t[1]=e=>u.GO_Bumblebee())},{default:(0,r.w5)((()=>[(0,r.Uk)("大黄蜂")])),_:1}),(0,r.Wm)(h,{type:"primary",onClick:t[2]||(t[2]=e=>u.GO_SteelCable())},{default:(0,r.w5)((()=>[(0,r.Uk)("钢索")])),_:1}),i,(0,r.Wm)(h,{type:"primary",onClick:t[3]||(t[3]=e=>u.GO_Bluetooth())},{default:(0,r.w5)((()=>[(0,r.Uk)("变七蓝牙测试")])),_:1}),(0,r.Wm)(h,{type:"primary",onClick:t[4]||(t[4]=e=>u.GO_BluetoothBumblebee())},{default:(0,r.w5)((()=>[(0,r.Uk)("大黄蜂蓝牙测试")])),_:1}),(0,r.Wm)(h,{type:"primary",onClick:u.GO_BluetoothSteelCable},{default:(0,r.w5)((()=>[(0,r.Uk)(" 钢索蓝牙测试 ")])),_:1},8,["onClick"]),(0,r.Wm)(h,{type:"primary",onClick:u.Go_BluetoothBazz},{default:(0,r.w5)((()=>[(0,r.Uk)(" 巴斯光年蓝牙测试 ")])),_:1},8,["onClick"]),l,(0,r.Wm)(h,{type:"primary",onClick:u.Go_facTest},{default:(0,r.w5)((()=>[(0,r.Uk)(" 抽象接口测试 ")])),_:1},8,["onClick"])])}var u=a(4693),h=a.n(u),p={data(){return{msg:"aaa",ports:[],abc:[]}},methods:{async requestSerialPort(){try{const e=await navigator.serial.requestPort();console.log(e)}catch(err){console.error(err)}},async getSerialPorts(){try{this.ports=await navigator.serial.getPorts(),console.log(this.ports)}catch(err){console.error(err)}},GO_Convoy_Seven(){this.$router.replace("/Convoy_Seven")},GO_Bumblebee(){this.$router.replace("/Bumblebee")},async GO_SteelCable(){this.$router.replace("/SteelCable")},async GO_Bluetooth(){this.$router.replace("/Bluetooth")},async GO_BluetoothBumblebee(){this.$router.replace("/BluetoothBumblebee")},async GO_BluetoothSteelCable(){this.$router.replace("/BluetoothSteelCable")},async Go_BluetoothBazz(){this.$router.replace("/BluetoothBazz")},async Go_facTest(){this.$router.replace("/TestFactory")},async f(){}},mounted(){this.f()}},d=a(89);const m=(0,d.Z)(p,[["render",c]]);var g=m;const f=(0,r._)("h3",null,"变七机器人通讯结构",-1),v=(0,r._)("p",null,"连接方式 : 串口",-1),_=(0,r._)("p",null,"配置参数baudRate : 115200",-1),w=(0,r._)("p",null,"配置参数parity : 0",-1),b=(0,r._)("p",null,"配置参数dataBits : 8",-1),P=(0,r._)("p",null,"配置参数stopBits : 1",-1),y=(0,r._)("label",null,[(0,r.Uk)(" 连接成功后，发送[0xFF, 0xFF, 0x02, 0xF5, 0xF7] 指令0xF5是进入PC编程模式 0xF7是(指令+数据)和%256的结果 "),(0,r._)("br"),(0,r.Uk)(" 发送后接收数据直到接收[0xFF,0xFF,0x04 0xF4,0x4F 0x4B,0x93] 当中的数据需要进行处理")],-1),k=(0,r._)("p",null,null,-1),L=(0,r._)("label",null,"关闭需要发送指令 [0xFF, 0xFF, 0x02, 0xF6, 0xF8] 然后断开端口",-1),M=(0,r._)("p",null,null,-1),S=(0,r._)("label",null,"例如:左肩旋转: ",-1),D=(0,r._)("label",null,"控制舵机移动[0xFF,0xFF,数据长度,指令(0x01),数据(位置+速度),sum和]指定左肩的下标控制",-1),I=(0,r._)("p",null,null,-1),F=(0,r._)("label",null,"初始位置在人形的时候就已经读取过，具体是那个看代码，保存指令为[0xFF,0xFF,数据长度,指令(0x03) 数据,sum和] 更改方式也是指定的某个轴的下标",-1),B=(0,r._)("p",null,null,-1),A=(0,r._)("label",null,"初始位置在人形的时候就已经读取过，具体是那个看代码，保存指令为[0xFF,0xFF,数据长度,指令(0x0F) 数据,sum和] 更改方式也是指定的某个轴的下标",-1),T=(0,r._)("p",null,null,-1),N=(0,r._)("p",null,null,-1),x=(0,r._)("label",null,"下载是将pc上的数据载入到机器人当中，这里用一个.shr机器人保存再本地的文件开始,下载的指令顺序是:删除(0x15),创建(0x14),修改(0x17),下载(0x02)",-1),C=(0,r._)("p",null,null,-1),U=(0,r._)("label",null,"这个地方有个bug就是文件名是数字且这个数字小于10的情况下发送到机器人的数据会多一个具体原因不明(感觉是机器人内部处理的问题，用纯PC的软件不会)",-1),E=(0,r._)("p",null,null,-1),R=(0,r._)("h4",null,"上传功能",-1),O=(0,r._)("label",null,"上传功能首先需要读取一下机器人内部的上传动作文件名",-1),G=(0,r._)("p",null,null,-1),W=(0,r._)("label",null,"以绝对路径读取文件夹指令为[0xFF,0xFF,数据长度,指令(0x1A) 数据,sum和]",-1),V=(0,r._)("p",null,null,-1),Z=(0,r._)("label",null,"上传，先选择要上传的文件，然后发送指令[0xFF,0xFF,数据长度,指令(0x16),0x3B,(固定数据) 数据(文件名称数据),sum和]",-1);function q(e,t,a,s,o,n){const i=(0,r.up)("el-button"),l=(0,r.up)("el-input"),c=(0,r.up)("el-option"),u=(0,r.up)("el-select");return(0,r.wg)(),(0,r.iD)(r.HY,null,[f,v,_,w,b,P,(0,r.Wm)(i,{type:"primary",onClick:t[0]||(t[0]=e=>n.requestSerialPort())},{default:(0,r.w5)((()=>[(0,r.Uk)("连接")])),_:1}),y,k,(0,r.Wm)(i,{type:"primary",onClick:t[1]||(t[1]=e=>n.closePose())},{default:(0,r.w5)((()=>[(0,r.Uk)("关闭")])),_:1}),L,M,(0,r.Wm)(i,{type:"primary",onClick:t[2]||(t[2]=e=>n.timeSendingPosition())},{default:(0,r.w5)((()=>[(0,r.Uk)("时时发送位置")])),_:1}),S,(0,r.Wm)(l,{modelValue:o.ArmInput,"onUpdate:modelValue":t[3]||(t[3]=e=>o.ArmInput=e),style:{width:"50px"}},null,8,["modelValue"]),D,I,(0,r.Wm)(i,{type:"primary",onClick:t[4]||(t[4]=e=>n.humanoidInitial())},{default:(0,r.w5)((()=>[(0,r.Uk)("人形初始位置保存")])),_:1}),F,B,(0,r.Wm)(i,{type:"primary",onClick:t[5]||(t[5]=e=>n.squatStart())},{default:(0,r.w5)((()=>[(0,r.Uk)("下蹲初始位置")])),_:1}),A,T,(0,r._)("input",{type:"file",onChange:t[6]||(t[6]=(...e)=>n.actionDownload&&n.actionDownload(...e))},null,32),(0,r.Uk)(" 下载功能 "),N,x,C,U,E,R,O,G,(0,r.Wm)(i,{type:"primary",onClick:t[7]||(t[7]=e=>n.getActionName())},{default:(0,r.w5)((()=>[(0,r.Uk)("读取")])),_:1}),(0,r.Wm)(u,{modelValue:o.selectedOption,"onUpdate:modelValue":t[8]||(t[8]=e=>o.selectedOption=e)},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.vOpentions,(e=>((0,r.wg)(),(0,r.j4)(c,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),W,V,(0,r.Wm)(i,{type:"primary",onClick:t[9]||(t[9]=e=>n.getAction())},{default:(0,r.w5)((()=>[(0,r.Uk)(" 上传")])),_:1}),Z],64)}a(1439),a(7585),a(5315),a(7658);class H{constructor({number:e,Name:t,Pos:a,Speed:r,Delay:s,Loop_Time:o,Is_Loop_Start:n,Is_Loop_End:i,Music_State:l,Music_Number:c}){this.number=e,this.Name=t,this.Pos=a,this.Speed=r,this.Delay=s,this.Loop_Time=o,this.Is_Loop_Start=n,this.Is_Loop_End=i,this.Music_State=l,this.Music_Number=c}}function z(e){return new H({number:e.number,Name:e.Name,Pos:e.Pos,Speed:e.Speed,Delay:e.Delay,Loop_Time:e.Loop_Time,Is_Loop_Start:e.Is_Loop_Start,Is_Loop_End:e.Is_Loop_End,Music_State:e.Music_State,Music_Number:e.Music_Number})}var j={data(){return{port:{},isLink:!1,initData:[],ArmInput:0,dataArr:[],selectedOption:"",vOpentions:[]}},methods:{async requestSerialPort(){try{const s=await navigator.serial.requestPort();if(null!=s){await s.open({baudRate:115200,parity:"none",dataBits:8,stopBits:1,bufferSize:4096}),this.port=s;const o=new Uint8Array([255,255,2,245,247]),n=s.writable.getWriter();await n.write(o),await n.releaseLock();const i=await s.readable.getReader();this.isLink=!1;var e=[];while(1){if(1==this.isLink){i.releaseLock();break}const{value:r,done:s}=await i.read();if(s){i.releaseLock();break}for(let t=0;t<r.length;t++)e[e.length]=r[t];for(let o=0;o<e.length;o++)if(255==e[o]&&255==e[o+1]){var t=e[o+2],a=e[o+3];if(4==t&&245==a&&79==e[o+4]&&75==e[o+5]&&e[o+6]==(t+a+79+75)%256){this.isLink=!0;break}}}let l=0;for(let s=0;s<e.length;s++)if(255==e[s]&&255==e[s+1]){t=e[s+2],a=e[s+3];if(50==t&&245==a){var r=[];for(let t=0;t<48;t++)r[t]=e[s+t+4];s+=52,this.initData[l]=r,l++}}}}catch(err){console.error(err)}},async closePose(){try{const e=new Uint8Array([255,255,2,246,248]),t=this.port.writable.getWriter();await t.write(e),this.isLink=!1}catch(err){console.error(err)}},async timeSendingPosition(){try{if(1==this.isLink){var e=this.initData[0];e[12]+=parseInt(this.ArmInput),e[e.length]=25;var t=[];t[0]=255,t[1]=255,t[2]=51,t[3]=1;var a=52;for(let r=0;r<e.length;r++)t[4+r]=e[r],a+=e[r];a%=256,t[t.length]=a;var r=new Uint8Array(t);const s=this.port.writable.getWriter();await s.write(r),await s.releaseLock()}}catch(err){console.error(err)}},async humanoidInitial(){try{if(1==this.isLink){var e=this.initData[0],t=[];t[0]=255,t[1]=255,t[2]=50,t[3]=3;var a=53;for(let r=0;r<e.length;r++)t[4+r]=e[r],a+=e[r];a%=256,t[t.length]=a,console.log(t);var r=new Uint8Array(t);const s=this.port.writable.getWriter();await s.write(r),await s.releaseLock()}}catch(err){console.error(err)}},async squatStart(){try{if(1==this.isLink){var e=this.initData[2],t=[];t[0]=255,t[1]=255,t[2]=50,t[3]=15;var a=65;for(let r=0;r<e.length;r++)t[4+r]=e[r],a+=e[r];a%=256,t[t.length]=a,console.log(t);var r=new Uint8Array(t);const s=this.port.writable.getWriter();await s.write(r),await s.releaseLock()}}catch(err){console.error(err)}},async actionDownload(e){try{const t=e.target.files[0],a=new FileReader;a.readAsText(t,"UTF-8"),a.onload=async e=>{const t=e.target.result,a=t.trim().split("\n").length;this.dataArr=[];for(let h=0;h<a;h++){const e=t.split("\r\n")[h].split(",")[0],a=e.split(/\s+/).map((e=>isNaN(e)?e:""==e?" ":Number(e)));this.dataArr.push(a)}if(1==this.isLink){var r=[],s=[],o=this.dataArr,n=o.length;for(let t=0;t<n;t++){var i=!1;" "==o[t][0]&&(i=!0),253==o[t][0]&&253==o[t][1]&&254==o[t][2]&&" "!=o[t][3]&&r.push(o[t][3]),1==i&&s.push(o[t])}var l=0;n=s.length;var c=[];for(let t=0;t<n;t++){var u=s[t][5],p=s[t][6],d=s[t][7],m=s[t][8],g=s[t][9],f=s[t][10];for(let r=0;r<8;r++){let e=u&Math.pow(2,7-r);0!=e&&(s[t][r+11]*=-1)}for(let r=0;r<8;r++){let e=p&Math.pow(2,7-r);0!=e&&(s[t][r+19]*=-1)}for(let r=0;r<8;r++){let e=d&Math.pow(2,7-r);0!=e&&(s[t][r+27]*=-1)}for(let r=0;r<8;r++){let e=m&Math.pow(2,7-r);0!=e&&(s[t][r+35]*=-1)}for(let r=0;r<8;r++){let e=g&Math.pow(2,7-r);0!=e&&(s[t][r+43]*=-1)}for(let r=0;r<8;r++){let e=f&Math.pow(2,7-r);0!=e&&(s[t][r+51]*=-1)}var v=0,_=!1,w=!1;0!=s[t][4]&&s[t][4]>128?v=s[t][4]-128:0!=s[t][4]&&s[t][4]<128?(v=s[t][4],_=!1,w=!0):0==s[t][4]&&(_=!1,w=!1);var b=[],P=s[t][3];for(let r=0;r<48;r++)b[r]=s[t][r+11];var y=s[t][59],k=s[t][60],L=0;let e=-1,a=-1;251!=s[t][61]&&251!=s[t][62]&&252!=s[t][61]&&252!=s[t][62]?(a=256*s[t][61]+s[t][62],L=2):251==s[t][61]&&251==s[t][62]?L=4:252==s[t][61]&&252==s[t][62]&&(L=3),e=a,0!=s[t][4]&&(_=0==l,s[t][4]<128?(w=!0,v=s[t][4]):(w=!1,v=s[t][4]-128)),l=s[t][4]>128?s[t][4]:0;var M={number:P,Name:1,Pos:b,Speed:y,Delay:k,Loop_Time:v,Is_Loop_Start:_,Is_Loop_End:w,Music_State:L,Music_Number:e};c.push(z(M))}n=c.length;let e=0;v=-1;var S=!1,D=[[]],I=c[0].number;D[0]=[];for(let t=0;t<n;t++){I!=c[t].number&&(I=c[t].number,e++,D[e]=[]);var F=[];F.push(255),F.push(255),F.push(61),F.push(2),S||(F[4]=0),!S||c[t].Is_Loop_Start||c[t].Is_Loop_End||(F[4]=v+128),c[t].Is_Loop_End&&(S=!1,F[4]=v,v=0),c[t].Is_Loop_Start&&(S=!0,v=c[t].Loop_Time,F[4]=v+128);var B=0,A=0,T=0,N=0,x=0,C=0;for(let e=0;e<48;e++)e<8&&c[t].Pos[e]<0&&(B+=parseInt(Math.pow(2,7-e)),c[t].Pos[e]=-1*c[t].Pos[e]),e>=8&&e<16&&c[t].Pos[e]<0&&(A+=parseInt(Math.pow(2,15-e)),c[t].Pos[e]=-1*c[t].Pos[e]),e>=16&&e<24&&c[t].Pos[e]<0&&(T+=parseInt(Math.pow(2,23-e)),c[t].Pos[e]=-1*c[t].Pos[e]),e>=24&&e<32&&c[t].Pos[e]<0&&(N+=parseInt(Math.pow(2,31-e)),c[t].Pos[e]=-1*c[t].Pos[e]),e>=32&&e<40&&c[t].Pos[e]<0&&(x+=parseInt(Math.pow(2,39-e)),c[t].Pos[e]=-1*c[t].Pos[e]),e>=40&&e<48&&c[t].Pos[e]<0&&(C+=parseInt(Math.pow(2,47-e)),c[t].Pos[e]=-1*c[t].Pos[e]);F[5]=B,F[6]=A,F[7]=T,F[8]=N,F[9]=x,F[10]=C;for(let e=0;e<48;e++)F[e+11]=c[t].Pos[e];switch(F[59]=c[t].Speed,F[60]=c[t].Delay,c[t].Music_State){case 1:F[61]=parseInt(c[t].Music_Number/256),F[62]=parseInt(c[t].Music_Number%256);break;case 2:F[61]=parseInt(c[t].Music_Number/256),F[62]=parseInt(c[t].Music_Number%256);break;case 3:F[61]=252,F[62]=252;break;case 4:F[61]=251,F[62]=251;break}var U=0;for(let e=2;e<63;e++)U+=F[e];U%=256,F[63]=U,D[e].push(F)}console.log(D),n=r.length;for(let t=0;t<n;t++){let e=new Promise(((e,t)=>{setTimeout((()=>e()),50)}));await e;var E=r[t];console.log(E);var R=E.substring(0,4),O=E.substring(4);"地面::"==R?R="GroundAction/":"凌空::"==R&&(R="VolleyAction/"),O=R+O;var G=Array.from(h().encode(O,"utf8")),W=G.length,V=W+2,Z=[];Z[0]=255,Z[1]=255,Z[2]=V,Z[3]=21;U=V+21;for(let t=0;t<W;t++)Z.push(G[t]),U+=G[t];U%=256,Z.push(U);var q=new Uint8Array(Z);const a=this.port.writable.getWriter();await a.write(q);const s=await this.port.readable.getReader();var H=[],j=!1;while(!j){const{value:e,done:t}=await s.read();if(t){s.releaseLock();break}for(let a=0;a<e.length;a++)H[H.length]=e[a];for(let a=0;a<H.length;a++)if(255==H[a]&&255==H[a+1]){var Y=H[a+3];21==Y&&79==H[a+4]&&75==H[a+5]&&(j=!0)}}let o=new Promise(((e,t)=>{setTimeout((()=>e()),50)}));await o,Z[3]=20,Z[Z.length-1]=Z[Z.length-1]-1,q=new Uint8Array(Z),await a.write(q),H=[],j=!1;while(!j){const{value:e,done:t}=await s.read();if(t){s.releaseLock();break}for(let a=0;a<e.length;a++)H[H.length]=e[a];for(let a=0;a<H.length;a++)if(255==H[a]&&255==H[a+1]){Y=H[a+3];20==Y&&79==H[a+4]&&75==H[a+5]&&(j=!0)}}let n=new Promise(((e,t)=>{setTimeout((()=>e()),50)}));await n,Z=[],U=0,O+=".sh",console.log(O),G=Array.from(h().encode(O,"gb2312")),W=G.length,V=W+2,Z[0]=255,Z[1]=255,Z[2]=V,Z[3]=23,U=V+23;for(let t=0;t<W;t++)Z.push(G[t]),U+=G[t];U%=256,Z.push(U),q=new Uint8Array(Z),await a.write(q),H=[],j=!1;while(!j){const{value:e,done:t}=await s.read();if(t){s.releaseLock();break}for(let a=0;a<e.length;a++)H[H.length]=e[a];for(let a=0;a<H.length;a++)if(255==H[a]&&255==H[a+1]){Y=H[a+3];23==Y&&79==H[a+4]&&75==H[a+5]&&(j=!0)}}let i=new Promise(((e,t)=>{setTimeout((()=>e()),50)}));await i,console.log(D[t]);for(let r=0;r<D[t].length;r++){let e=new Promise(((e,t)=>{setTimeout((()=>e()),150)}));await e;var $=new Uint8Array(D[t][r]);await a.write($),H=[],j=!1;while(!j){const{value:e,done:t}=await s.read();if(t){s.releaseLock();break}for(let a=0;a<e.length;a++)H[H.length]=e[a];for(let a=0;a<H.length;a++)if(255==H[a]&&255==H[a+1]){Y=H[a+3];2==Y&&79==H[a+4]&&75==H[a+5]&&(console.log(a+" "+H),j=!0)}}}await a.releaseLock(),await s.releaseLock()}}}}catch(err){console.error(err)}},async getActionName(){try{if(1==this.isLink){var e=Array.from(h().encode("GroundAction","gb2312")),t=e.length,a=t+2,r=[];r[0]=255,r[1]=255,r[2]=a,r[3]=26;var s=a+26;for(let a=0;a<t;a++)r.push(e[a]),s+=e[a];s%=256,r.push(s);var o=new Uint8Array(r);const d=this.port.writable.getWriter();await d.write(o);const m=await this.port.readable.getReader();var n=[],i=!1;while(!i){const{value:e,done:t}=await m.read();if(t){m.releaseLock();break}for(let a=0;a<e.length;a++)n[n.length]=e[a];for(let a=0;a<n.length;a++)if(255==n[a]&&255==n[a+1]&&4==n[a+2]&&250==n[a+3]&&79==n[a+4]&&75==n[a+5]&&152==n[a+6]){i=!0,n.slice(a,6);break}}var l=[];for(let e=0;e<n.length;e++)if(255==n[e]&&255==n[e+1]&&255!=n[e+2]&&26==n[e+3]){var c=n[e+2],u=[];for(let t=0;t<c-2;t++)u.push(n[e+4+t]);e=e+2+c;var p="地面::"+h().decode(u,"gb2312");l.push(p)}e=Array.from(h().encode("VolleyAction","gb2312")),t=e.length,a=t+2,r=[],r[0]=255,r[1]=255,r[2]=a,r[3]=26,s=a+26;for(let a=0;a<t;a++)r.push(e[a]),s+=e[a];s%=256,r.push(s),o=new Uint8Array(r),await d.write(o),n=[],i=!1;while(!i){const{value:e,done:t}=await m.read();if(t){m.releaseLock();break}for(let a=0;a<e.length;a++)n[n.length]=e[a];for(let a=0;a<n.length;a++)if(255==n[a]&&255==n[a+1]&&4==n[a+2]&&250==n[a+3]&&79==n[a+4]&&75==n[a+5]&&152==n[a+6]){i=!0,n.slice(a,6);break}}for(let e=0;e<n.length;e++)if(255==n[e]&&255==n[e+1]&&255!=n[e+2]&&26==n[e+3]){c=n[e+2],u=[];for(let t=0;t<c-2;t++)u.push(n[e+4+t]);e=e+2+c;p="凌空::"+h().decode(u,"gb2312");l.push(p)}await d.releaseLock(),await m.releaseLock(),this.vOpentions=l}}catch(err){console.error(err)}},async getAction(){try{if(1==this.isLink&&""!=this.selectedOption){var e=this.selectedOption.substring(0,4),t=this.selectedOption.substring(4);"地面::"==e?e="GroundAction/":"凌空::"==e&&(e="VolleyAction/"),t=e+t;var a=Array.from(h().encode(t,"gb2312")),r=a.length,s=r+3,o=[];o[0]=255,o[1]=255,o[2]=s,o[3]=22,o[4]=59;var n=s+22+59;for(let e=0;e<r;e++)o.push(a[e]),n+=a[e];n%=256,o.push(n);var i=new Uint8Array(o);const d=this.port.writable.getWriter();await d.write(i);const m=await this.port.readable.getReader();var l=[],c=!1;while(!c){const{value:e,done:t}=await m.read();if(t){m.releaseLock();break}for(let a=0;a<e.length;a++)l[l.length]=e[a];for(let a=0;a<l.length;a++)if(255==l[a]&&255==l[a+1]&&4==l[a+2]&&250==l[a+3]&&79==l[a+4]&&75==l[a+5]&&152==l[a+6]){c=!0,l.slice(a,6);break}}for(let e=0;e<l.length;e++)if(255==l[e]&&255==l[e+1]&&255!=l[e+2]&&22==l[e+3]){var u=l[e+2],p=[];for(let t=0;t<u-2;t++)p.push(l[e+4+t]);e=e+2+u,console.log(p)}await d.releaseLock(),await m.releaseLock()}}catch(err){console.error(err)}}}};const Y=(0,d.Z)(j,[["render",q]]);var $=Y;const K=(0,r._)("h3",null,"大黄蜂机器人通讯结构",-1),J=(0,r._)("p",null,"连接方式 : 串口",-1),Q=(0,r._)("p",null,"配置参数baudRate : 115200",-1),X=(0,r._)("p",null,"配置参数parity : 0",-1),ee=(0,r._)("p",null,"配置参数dataBits : 8",-1),te=(0,r._)("p",null,"配置参数stopBits : 1",-1),ae=(0,r._)("p",null,"配置参数bufferSize : 4096",-1),re=(0,r._)("label",null,[(0,r.Uk)(" 连接成功后，发送[0xFF, 0xFF, 0x02, 0xF5, 0xF7] 指令0xF5是进入PC编程模式 0xF7是(指令+数据)和%256的结果 "),(0,r._)("br"),(0,r.Uk)(" 发送后接收数据直到接收[0xFF,0xFF,0x04 0xF4,0x4F 0x4B,0x93] 当中的数据需要进行处理")],-1),se=(0,r._)("p",null,null,-1),oe=(0,r._)("p",null,null,-1),ne=(0,r._)("label",null,"下载是将pc上的数据载入到机器人当中，这里用一个.shr机器人保存再本地的文件开始,下载的指令顺序是:删除(0x07),创建(0X06),下载(0x02)",-1),ie=(0,r._)("p",null,null,-1);function le(e,t,a,s,o,n){const i=(0,r.up)("el-button");return(0,r.wg)(),(0,r.iD)(r.HY,null,[K,J,Q,X,ee,te,ae,(0,r.Wm)(i,{type:"primary",onClick:t[0]||(t[0]=e=>n.requestSerialPort())},{default:(0,r.w5)((()=>[(0,r.Uk)("连接")])),_:1}),re,se,(0,r._)("input",{type:"file",onChange:t[1]||(t[1]=(...e)=>n.actionDownload&&n.actionDownload(...e))},null,32),oe,ne,ie],64)}var ce={data(){return{port:{},isLink:!1,initData:[],dataArr:[]}},methods:{async requestSerialPort(){try{const s=await navigator.serial.requestPort();if(null!=s){await s.open({baudRate:115200,dataBits:8,stopBits:1,bufferSize:4096}),this.port=s;const o=new Uint8Array([255,255,2,245,247]),n=s.writable.getWriter();await n.write(o),await n.releaseLock();const i=await s.readable.getReader();this.isLink=!1;var e=[];while(1){if(1==this.isLink){i.releaseLock();break}const{value:r,done:s}=await i.read();if(s){i.releaseLock();break}for(let t=0;t<r.length;t++)e[e.length]=r[t];for(let o=0;o<e.length;o++)if(255==e[o]&&255==e[o+1]){var t=e[o+2],a=e[o+3];if(4==t&&245==a&&79==e[o+4]&&75==e[o+5]&&e[o+6]==(t+a+79+75)%256){this.isLink=!0;break}}}let l=0;for(let s=0;s<e.length;s++)if(255==e[s]&&255==e[s+1]){t=e[s+2],a=e[s+3];if(50==t&&245==a){var r=[];for(let t=0;t<48;t++)r[t]=e[s+t+4];s+=52,this.initData[l]=r,l++}}console.log(this.initData)}}catch(err){console.error(err)}},async actionDownload(e){try{const t=e.target.files[0],a=new FileReader;a.readAsText(t,"UTF-8"),a.onload=async e=>{const t=e.target.result,a=t.trim().split("\n").length;this.dataArr=[];for(let h=0;h<a;h++){const e=t.split("\r\n")[h].split(",")[0],a=e.split(/\s+/).map((e=>isNaN(e)?e:""==e?" ":Number(e)));this.dataArr.push(a)}if(1==this.isLink){var r=[],s=[],o=this.dataArr,n=o.length;for(let t=0;t<n;t++){var i=!1;" "==o[t][0]&&(i=!0),253==o[t][0]&&253==o[t][1]&&254==o[t][2]&&" "!=o[t][3]&&r.push(o[t][3]),1==i&&s.push(o[t])}var l=0;n=s.length;var c=[];for(let t=0;t<n;t++){var u=s[t][5],p=s[t][6],d=s[t][7],m=s[t][8],g=s[t][9],f=s[t][10];for(let e=0;e<8;e++){let a=u&Math.pow(2,7-e);0!=a&&(s[t][e+11]*=-1)}for(let e=0;e<8;e++){let a=p&Math.pow(2,7-e);0!=a&&(s[t][e+19]*=-1)}for(let e=0;e<8;e++){let a=d&Math.pow(2,7-e);0!=a&&(s[t][e+27]*=-1)}for(let e=0;e<8;e++){let a=m&Math.pow(2,7-e);0!=a&&(s[t][e+35]*=-1)}for(let e=0;e<8;e++){let a=g&Math.pow(2,7-e);0!=a&&(s[t][e+43]*=-1)}for(let e=0;e<8;e++){let a=f&Math.pow(2,7-e);0!=a&&(s[t][51]*=-1)}var v=0,_=!1,w=!1;0!=s[t][4]&&s[t][4]>128?v=s[t][4]-128:0!=s[t][4]&&s[t][4]>128?(v=s[t][4],_=!1,w=!0):0==s[t][4]&&(_=!1,w=!1);var b=[],P=s[t][3];for(let e=0;e<48;e++)b[e]=s[t][e+11];var y=s[t][59],k=s[t][60],L=0,M=-1,S=-1;251!=s[t][61]&&251!=s[t][62]&&252!=s[t][61]&&252!=s[t][62]?(S=256*s[t][61]+s[t][62],L=2):251==s[t][61]&&251==s[t][62]?L=4:252==s[t][61]&&252==s[t][62]&&(L=3),M=S,0!=s[t][4]&&(_=0==l,s[t][4]<128?(w=!0,v=s[t][4]):(w=!1,v=s[t][4]-128)),l=s[t][4]>128?s[t][4]:0;var D={number:P,Name:1,Pos:b,Speed:y,Delay:k,Loop_Time:v,Is_Loop_Start:_,Is_Loop_End:w,Music_State:L,Music_Number:M};c.push(z(D))}if(console.log(c),0==this.isLink)return;n=c.length;let e=0;v=-1;var I=!1,F=[[]],B=c[0].number;F[0]=[];for(let t=0;t<n;t++){B!=c[t].number&&(B=c[t].number,e++,F[e]=[]);var A=[];A.push(255),A.push(255),A.push(61),A.push(2),I||(A[4]=0),!I||c[t].Is_Loop_Start||c[t].Is_Loop_End||(A[4]=v+128),c[t].Is_Loop_End&&(I=!1,A[4]=v,v=0),c[t].Is_Loop_Start&&(I=!0,v=c[t].Loop_Time,A[4]=v+128);var T=0,N=0,x=0,C=0,U=0,E=0;for(let e=0;e<48;e++)e<8&&c[t].Pos[e]<0&&(T+=parseInt(Math.pow(2,7-e)),c[t].Pos[e]=-1*c[t].Pos[e]),e>=8&&e<16&&c[t].Pos[e]<0&&(N+=parseInt(Math.pow(2,15-e)),c[t].Pos[e]=-1*c[t].pos[e]),e>=16&&e<24&&c[t].Pos[e]<0&&(x+=parseInt(Math.pow(2,23-e)),c[t].Pos[e]=-1*c[t].Pos[e]),e>=24&&e<32&&c[t].Pos[e]<0&&(C+=parseInt(Math.pow(2,31-e)),c[t].Pos[e]=-1*c[t].Pos[e]),e>=32&&e<40&&c[t].Pos[e]<0&&(U+=parseInt(Math.pow(2,39-e)),c[t].Pos[e]=-1*c[t].Pos[e]),e>=40&&e<48&&c[t].Pos[e]<0&&(E+=parseInt(Math.pow(2,47-e)),c[t].Pos[e]=-1*c[t].Pos[e]);A[5]=T,A[6]=N,A[7]=x,A[8]=C,A[9]=U,A[10]=E;for(let e=0;e<48;e++)A[e+11]=c[t].Pos[e];switch(A[59]=c[t].Speed,A[60]=c[t].Delay,c[t].Music_State){case 1:A[61]=parseInt(c[t].Music_Number/256),A[62]=parseInt(c[t].Music_Number%256);break;case 2:A[61]=parseInt(c[t].Music_Number/256),A[62]=parseInt(c[t].Music_Number%256);break;case 3:A[61]=252,A[62]=252;break;case 4:A[61]=251,A[62]=251;break}var R=0;for(let e=2;e<63;e++)R+=A[e];R%=256,A[63]=R,F[e].push(A)}n=r.length,console.log(F);for(let t=0;t<n;t++){let e=new Promise(((e,t)=>{setTimeout((()=>e()),50)}));await e;var O=r[t],G=Array.from(h().encode(O,"utf8")),W=G.length,V=W+2,Z=[];R=0;Z[0]=255,Z[1]=255,Z[2]=V,Z[3]=7,R=V+7;for(let t=0;t<W;t++)Z.push(G[t]),R+=G[t];R%=256,Z.push(R);var q=new Uint8Array(Z);const a=this.port.writable.getWriter();await a.write(q);const s=await this.port.readable.getReader();let o=new Promise(((e,t)=>{setTimeout((()=>e()),50)}));await o,Z[3]=6,Z[Z.length-1]=Z[Z.length-1]-1,q=new Uint8Array(Z),await a.write(q),[],!1;let n=new Promise(((e,t)=>{setTimeout((()=>e()),50)}));await n;for(let r=0;r<F[t].length;r++){let e=new Promise(((e,t)=>{setTimeout((()=>e()),50)}));await e;const s=new Uint8Array(F[t][r]);console.log(s),await a.write(s),[],!1}await a.releaseLock(),await s.releaseLock()}console.log("上传完成")}}}catch(err){}}}};const ue=(0,d.Z)(ce,[["render",le]]);var he=ue;const pe=(0,r._)("h3",null,"钢索机器人通讯结构",-1),de=(0,r._)("p",null,"连接方式 ： HID(usb口的一种方式)",-1),me=(0,r._)("p",null,"匹配VendorID ： 0x0483",-1),ge=(0,r._)("p",null,"匹配ProductID ： 0x5750",-1),fe=(0,r._)("label",null,"连接成功后发送[0xFF, 0x02, 0xF5, 0xF7]读取数据直到获取到[4F 4B](OK)后接收结束",-1),ve=(0,r._)("p",null,null,-1),_e=(0,r._)("label",null,"关闭需要发送指令 [ 0xFF, 0x02, 0xF6, 0xF8] 然后断开HID",-1),we=(0,r._)("p",null,null,-1),be=(0,r._)("label",null,"例如左胯:",-1),Pe=(0,r._)("label",null,"控制舵机移动[0xFF,数据长度,指令(0x01),数据(位置+速度),sum和]指定左肩的下标控制",-1),ye=(0,r._)("p",null,null,-1),ke=(0,r._)("p",null,null,-1),Le=(0,r._)("h4",null,"上传功能",-1),Me=(0,r._)("label",null,"读取机器人内部的动作文件名",-1),Se=(0,r._)("p",null,null,-1);function De(e,t,a,s,o,n){const i=(0,r.up)("el-button"),l=(0,r.up)("el-input");return(0,r.wg)(),(0,r.iD)(r.HY,null,[pe,de,me,ge,(0,r.Wm)(i,{type:"primary",onClick:t[0]||(t[0]=e=>n.requestSerialPort())},{default:(0,r.w5)((()=>[(0,r.Uk)("连接")])),_:1}),fe,ve,(0,r.Wm)(i,{type:"primary",onClick:t[1]||(t[1]=e=>n.closeMessage())},{default:(0,r.w5)((()=>[(0,r.Uk)("关闭")])),_:1}),_e,we,(0,r.Wm)(i,{onClick:t[2]||(t[2]=e=>n.timeSendingPosition())},{default:(0,r.w5)((()=>[(0,r.Uk)("时时发送位置")])),_:1}),be,(0,r.Wm)(l,{modelValue:o.ArmInput,"onUpdate:modelValue":t[3]||(t[3]=e=>o.ArmInput=e),style:{width:"50px"}},null,8,["modelValue"]),Pe,ye,(0,r._)("input",{type:"file",onChange:t[4]||(t[4]=(...e)=>n.actionDownload&&n.actionDownload(...e))},null,32),(0,r.Uk)(" 下载功能 "),ke,Le,Me,Se,(0,r.Wm)(i,{type:"primary",onClick:t[5]||(t[5]=e=>n.getActionName())},{default:(0,r.w5)((()=>[(0,r.Uk)("读取")])),_:1})],64)}class Ie{constructor({number:e,Name:t,Pos:a,Speed:r,Delay:s,Loop_Time:o,Is_Loop_Start:n,Is_Loop_End:i,Music_State:l,Music_Number:c,Is_Cur_Form:u}){this.number=e,this.Name=t,this.Pos=a,this.Speed=r,this.Delay=s,this.Loop_Time=o,this.Is_Loop_Start=n,this.Is_Loop_End=i,this.Music_State=l,this.Music_Number=c,this.Is_Cur_Form=u}}function Fe(e){return new Ie({number:e.number,Name:e.Name,Pos:e.Pos,Speed:e.Speed,Delay:e.Delay,Loop_Time:e.Loop_Time,Is_Loop_Start:e.Is_Loop_Start,Is_Loop_End:e.Is_Loop_End,Music_State:e.Music_State,Music_Number:e.Music_Number,Is_Cur_Form:e.Is_Cur_Form})}var Be={data(){return{initData:[],isInitData:!1,endpointNumber:2,isLink:!1,hidDevice:[],dataArr:[],ArmInput:0,isRedActionLoong:!1,isRedActionRobot:!1,actionList:[]}},methods:{async requestSerialPort(){try{await navigator.hid.requestDevice({filters:[{vendorId:1155,productId:22352}]}).then((async e=>{await e[0].open(),this.hidDevice=e[0],e[0].addEventListener("inputreport",this.receivingProcess),this.initData=[],this.isInitData=!1;var t=new Uint8Array([255,2,245,247]);await e[0].sendReport(0,t)})).catch((e=>{console.error(e)}))}catch(err){console.log(err)}},async closeMessage(){if(1==this.isLink){var e=new Uint8Array([255,2,246,248]);await this.hidDevice.sendReport(0,e)}},async actionDownload(e){var t=e.target.files[0],a=new FileReader;a.readAsText(t,"UTF-8"),a.onload=async e=>{const t=e.target.result,a=t.trim().split("\n").length;this.dataArr=[];for(let h=0;h<a;h++){const e=t.split("\r\n")[h].split(",")[0],a=e.split(/\s+/).map((e=>isNaN(e)?e:""==e?" ":Number(e)));this.dataArr.push(a)}{var r=[],s=[],o=this.dataArr,n=o.length;for(let t=0;t<n;t++){var i=!1;" "==o[t][0]&&(i=!0),253==o[t][0]&&253==o[t][1]&&254==o[t][2]&&" "!=o[t][3]&&r.push(o[t][3]),1==i&&s.push(o[t])}var l=0;n=s.length;var c=[];for(let t=0;t<n;t++){var u=s[t][5],p=s[t][6],d=s[t][7],m=s[t][8],g=s[t][9],f=s[t][10];for(let e=0;e<8;e++){let a=u&Math.pow(2,7-e);0!=a&&(s[t][e+11]*=-1)}for(let e=0;e<8;e++){let a=p&Math.pow(2,7-e);0!=a&&(s[t][e+19]*=-1)}for(let e=0;e<8;e++){let a=d&Math.pow(2,7-e);0!=a&&(s[t][e+27]*=-1)}for(let e=0;e<8;e++){let a=m&Math.pow(2,7-e);0!=a&&(s[t][e+35]*=-1)}for(let e=0;e<8;e++){let a=g&Math.pow(2,7-e);0!=a&&(s[t][e+43]*=-1)}for(let e=0;e<8;e++){let a=f&Math.pow(2,7-e);0!=a&&(s[t][e+51]*=-1)}var v=0,_=!1,w=!1;0!=s[t][4]&&s[t][4]>128?v=s[t][4]-128:0!=s[t][4]&&s[t][4]<128?(v=s[t][4],_=!1,w=!0):0==s[t][4]&&(_=!1,w=!1);var b=[],P=s[t][3];for(let e=0;e<48;e++)b[e]=s[t][e+11];var y=s[t][59],k=s[t][60],L=0,M=-1,S=-1,D=0,I=s[t].length-2;63==I?(251!=s[t][61]&&251!=s[t][62]&&252!=s[t][61]&&252!=s[t][62]?(S=256*s[t][61]+s[t][62],L=2):251==s[t][61]&&251==s[t][62]?L=4:252==s[t][61]&&252==s[t][62]&&(L=3),M=S):61==I&&(S=0,L=2),D=s[t][s[t].length-2],M=S,0!=s[t][4]&&(_=0==l,s[t][4]<128?(w=!0,v=s[t][4]):(w=!1,v=s[t][4]-128)),l=s[t][4]>128?s[t][4]:0;var F={number:P,Name:1,Pos:b,Speed:y,Delay:k,Loop_Time:v,Is_Loop_Start:_,Is_Loop_End:w,Music_State:L,Music_Number:M,Is_Cur_Form:D};c.push(Fe(F))}n=c.length;let e=0;v=-1;var B=!1,A=[[]],T=c[0].number;A[0]=[];for(let t=0;t<n;t++){T!=c[t].number&&(T=c[t].number,e++,A[e]=[]);var N=[];N.push(255),N.push(62),N.push(2),B||(N[3]=0),!B||c[t].Is_Loop_Start||c[t].Is_Loop_End||(N[3]=v+128),c[t].Is_Loop_End&&(B=!1,N[3]=v,v=0),c[t].Is_Loop_Start&&(B=!0,v=c[t].Loop_Time,N[3]=v+128);var x=0,C=0,U=0,E=0,R=0,O=0;for(let e=0;e<48;e++)e<8&&c[t].Pos[e]<0&&(x+=parseInt(Math.pow(2,7-e)),c[t].Pos[e]=-1*c[t].Pos[e]),e>=8&&e<16&&c[t].Pos[e]<0&&(C+=parseInt(Math.pow(2,15-e)),c[t].Pos[e]=-1*c[t].Pos[e]),e>=16&&e<24&&c[t].Pos[e]<0&&(U+=parseInt(Math.pow(2,23-e)),c[t].Pos[e]=-1*c[t].Pos[e]),e>=24&&e<32&&c[t].Pos[e]<0&&(E+=parseInt(Math.pow(2,31-e)),c[t].Pos[e]=-1*c[t].Pos[e]),e>=32&&e<40&&c[t].Pos[e]<0&&(R+=parseInt(Math.pow(2,39-e)),c[t].Pos[e]=-1*c[t].Pos[e]),e>=40&&e<48&&c[t].Pos[e]<0&&(O+=parseInt(Math.pow(2,47-e)),c[t].Pos[e]=-1*c[t].Pos[e]);N[4]=x,N[5]=C,N[6]=U,N[7]=E,N[8]=R,N[9]=O;for(let e=0;e<48;e++)N[e+10]=c[t].Pos[e];switch(N[58]=c[t].Speed,N[59]=c[t].Delay,c[t].Music_State){case 1:N[60]=parseInt(c[t].Music_Number/256),N[61]=parseInt(c[t].Music_Number%256);break;case 2:N[60]=parseInt(c[t].Music_Number/256),N[61]=parseInt(c[t].Music_Number%256);break;case 3:N[60]=252,N[61]=252;break;case 4:N[60]=251,N[61]=251;break}N[62]=c[t].Is_Cur_Form;var G=0,W=N.length;for(let e=1;e<W;e++)G+=N[e];G%=256,N[63]=G,A[e].push(N)}console.log(A),n=r.length;for(let t=0;t<n;t++){let e=new Promise(((e,t)=>{setTimeout((()=>e()),50)}));await e;var V=r[t],Z=V.substring(0,3),q=V.substring(3);"人型:"==Z?Z="RobotAction/":"龙型:"==Z&&(Z="Action/"),q=Z+q+".sh";var H=Array.from(h().encode(q,"utf8")),z=H.length,j=z+2,Y=[];Y[0]=255,Y[1]=j,Y[2]=21;G=j+21;for(let t=0;t<z;t++)Y.push(H[t]),G+=H[t];G%=256,Y.push(G);var $=new Uint8Array(Y);await this.hidDevice.sendReport(0,$);let a=new Promise(((e,t)=>{setTimeout((()=>e()),50)}));await a,Y[2]=20,Y[Y.length-1]=Y[Y.length-1]-1,$=new Uint8Array(Y),await this.hidDevice.sendReport(0,$);let s=new Promise(((e,t)=>{setTimeout((()=>e()),50)}));await s;for(let r=0;r<A[t].length;r++){let e=new Promise(((e,t)=>{setTimeout((()=>e()),50)}));await e;var K=new Uint8Array(A[t][r]);console.log(K),await this.hidDevice.sendReport(0,K)}}}}},async timeSendingPosition(){try{if(1==this.isLink){var e=[];for(let t=0;t<this.initData[0].length;t++)e.push(this.initData[0][t]);e[0]+=parseInt(this.ArmInput),e.push(35);var t=[];t[0]=255,t[1]=51,t[2]=1;var a=52;for(let r=0;r<e.length;r++)t[3+r]=e[r],a+=e[r];a%=256,t[t.length]=a;var r=new Uint8Array(t);console.log(r),await this.hidDevice.sendReport(0,r)}}catch(err){console.error(err)}},async getActionName(){try{if(1==this.isLink){var e=[];e[0]=255,e[1]=2,e[2]=14,e[3]=16,this.isRedActionLoong=!0,await this.hidDevice.sendReport(0,e)}}catch(err){console.error(err)}},async receivingProcess(e){try{const{data:l}=e,c=new Uint8Array(l.buffer);console.log(c);var t=c.length;for(let e=0;e<t;e++)if(255==c[e]&&255==c[e+1]){var a=c[e+2],r=c[e+3];if(50==a&&245==r){var s=[];for(let t=0;t<48;t++)s[t]=c[e+t+4];this.initData.push(s)}else if(4==a&&245==r&&79==c[e+4]&&75==c[e+5])this.isLink=!0,this.isInitData=!0,console.log("isInitData = "+this.isInitData);else if(4==a&&246==r&&79==c[e+4]&&75==c[e+5])this.isLink=!1,this.hidDevice.close();else if(14==r){var o=r+a,n=[];for(let e=0;t<a-1;e++)o+=c[4+e],n.push(c[4+e]);o%256==c[4+o]&&actionList.push("龙型:"+h().decode(n,"gb2312"))}else if(4==a&&250==r&&79==c[e+4]&&75==c[e+5]&&152==c[e+6]&&1==this.isRedActionLoong){this.isRedActionLoong;conv.encode("RobotAction","gb2312");var i=[];i[0]=255,i[1]=2,i[2]=14,i[3]=16,this.isRedActionLoong=!0,await this.hidDevice.sendReport(0,i)}}}catch(err){console.log(err)}}}};const Ae=(0,d.Z)(Be,[["render",De]]);var Te=Ae;const Ne=(0,r._)("p",null,null,-1);var xe={__name:"Bluetooth",setup(e){let t,a;var s=[],o=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];async function n(){try{const e={filters:[{namePrefix:"QTZM-"}],optionalServices:[65472]};t=await navigator.bluetooth.requestDevice(e),a=await t.gatt.connect(),await new Promise((e=>setTimeout(e,1e3)));const r=await a.getPrimaryServices(65472);console.log(r),s=await r[0].getCharacteristic(65473),console.log(s),s.startNotifications(),s.addEventListener("characteristicvaluechanged",i),!0}catch(e){console.error("连接设备出错:",e),!1}}async function i(e){console.log(e)}async function l(e){var t=[],a=65535,r=[];t.push(85),t.push(170);var n=e.length+3;t.push(n>>8&255),r.push(n>>8&255),t.push(255&n),r.push(255&n);for(let s=0;s<e.length;s++)t.push(e[s]),r.push(e[s]);for(let s of r)a=a>>8^o[255&(a^s)];t.push(a>>8&255),t.push(255&a);var i=0;for(let s=0;s<t.length;s++)i+=t[s];t.push(255&i),console.log(new Uint8Array(t)),await s.writeValue(new Uint8Array(t))}async function c(){var e=[19,225];l(e)}return(e,t)=>{const a=(0,r.up)("el-button");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(a,{onClick:n},{default:(0,r.w5)((()=>[(0,r.Uk)("连接蓝牙设备")])),_:1}),Ne,(0,r.Wm)(a,{onClick:c},{default:(0,r.w5)((()=>[(0,r.Uk)("进入小剧场")])),_:1})],64)}}};const Ce=xe;var Ue=Ce;const Ee=(0,r._)("p",null,null,-1),Re=(0,r._)("p",null,null,-1),Oe=(0,r._)("table",null," 单独控制:进入编程模式 > 接收进入编程模式完成后 > 发送动作帧 > 退出编程模式 ",-1),Ge=(0,r._)("p",null,null,-1),We=(0,r._)("p",null,null,-1);function Ve(e,t,a,s,o,n){const i=(0,r.up)("el-button"),l=(0,r.up)("el-option"),c=(0,r.up)("el-select"),u=(0,r.up)("el-input");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(i,{onClick:n.connectToDevice},{default:(0,r.w5)((()=>[(0,r.Uk)("连接蓝牙设备(大黄蜂)")])),_:1},8,["onClick"]),Ee,(0,r.Wm)(i,{onClick:n.UploadActionFileNames},{default:(0,r.w5)((()=>[(0,r.Uk)("上传动作文件名")])),_:1},8,["onClick"]),(0,r.Wm)(c,{modelValue:o.selectedOption,"onUpdate:modelValue":t[0]||(t[0]=e=>o.selectedOption=e)},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.vOpentions,(e=>((0,r.wg)(),(0,r.j4)(l,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),(0,r.Wm)(i,{onClick:n.performDance},{default:(0,r.w5)((()=>[(0,r.Uk)("播放动作")])),_:1},8,["onClick"]),Re,Oe,Ge,(0,r.Wm)(i,{onClick:n.InProgrammingMode},{default:(0,r.w5)((()=>[(0,r.Uk)("进入编程模式")])),_:1},8,["onClick"]),(0,r.Wm)(u,{modelValue:o.ArmInput,"onUpdate:modelValue":t[1]||(t[1]=e=>o.ArmInput=e),style:{width:"50px"}},null,8,["modelValue"]),(0,r.Wm)(i,{onClick:n.ControlJoints},{default:(0,r.w5)((()=>[(0,r.Uk)("实时位置")])),_:1},8,["onClick"]),We,(0,r._)("input",{type:"file",onChange:t[2]||(t[2]=(...e)=>n.actionDownload&&n.actionDownload(...e))},null,32),(0,r.Uk)(" 下载 ")],64)}a(2801);var Ze={data(){return{device:[],server:[],isLink:!1,characteristic:[],Crc16_Table:[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448],vOpentions:[],vOpentionsList:[],selectedOption:"",isOpention:!1,isProgramme:!1,progData:[],ArmInput:0,sendPosData:[[]],sendPosDataNames:[],isSendPosData:!1,isSendPdFlag:0,isSendPdFlagEach:0}},methods:{async connectToDevice(){try{const e={filters:[{namePrefix:"DHF"}],optionalServices:[65472]};await navigator.bluetooth.requestDevice(e).then((async e=>{this.device=e,console.log(this.device),this.server=await this.device.gatt.connect(),await new Promise((e=>setTimeout(e,1e3)));const t=await this.server.getPrimaryServices(65472);this.characteristic=await t[0].getCharacteristic(65473),this.characteristic.startNotifications(),this.characteristic.addEventListener("characteristicvaluechanged",this.ReadDataMessage),this.isLink=!0}))}catch(err){err instanceof DOMException&&err.code===DOMException.NOT_FOUND_ERR?(this.isLink=!1,console.error("连接设备出错:",err)):(console.error("连接设备出错:",err),this.isLink=!1)}},async ReadDataMessage(e){const t=new Uint8Array(e.target.value.buffer);console.log(t);var a=t.length;for(let v=0;v<a;v++)if(85==t[v]&&170==t[v+1]){var r=t[v+2],s=t[v+3],o=r<<8|s,n=t[v+4],i=t[v+5];if(19==n&&16==i){var l=t[v+3+o-2],c=t[v+3+o-1],u=l<<8|c,p=65535;for(let e=0;e<o-1;e++)p=p>>8^this.Crc16_Table[255&(p^t[v+2+e])];if(p==u){var d=[];for(let e=0;e<o-3-2;e++)d.push(t[v+6+e]);this.addVoptions(h().decode(d,"GB18030"))}}else if(19==n&&250==i&&250==t[v+6])this.isOpention&&(this.isOpention=!1,console.log(this.vOpentions));else if(19==n&&230==i)if(230==t[v+6]&&6==o)this.isProgramme=!0,console.log(this.progData);else{l=t[v+3+o-2],c=t[v+3+o-1],u=l<<8|c,p=65535;for(let e=0;e<o-1;e++)p=p>>8^this.Crc16_Table[255&(p^t[v+2+e])];if(p==u){d=[];for(let e=0;e<o-3-2;e++)d.push(t[v+6+e]);this.progData.push(d)}}else if(19==n&&220==i&&79==t[v+6]&&75==t[v+7]){e=this.sendPosData[this.isSendPdFlag][0];console.log("第"+this.isSendPdFlag+"个动作文件创建成功，发送首帧"),this.SendDataFormatMessage(e)}else if(19==n&&227==i&&79==t[v+6]&&75==t[v+7]){a=this.sendPosData[this.isSendPdFlag].length;if(a-1==this.isSendPdFlagEach){if(this.isSendPdFlag=this.isSendPdFlag+1,this.sendPosDataNames.length==this.isSendPdFlag)console.log("动作文件发送完成"),this.isSendPosData=!1;else if(this.isSendPdFlag<this.sendPosDataNames.length){this.isSendPdFlagEach=0;var m=this.sendPosDataNames[this.isSendPdFlag],g=this.nameDataDispose(m),f=[];f=[];f.push(19),f.push(220);for(let e=0;e<g.length;e++)f.push(g[e]);console.log("发送第"+this.isSendPdFlag+"个动作文件"),this.SendDataFormatMessage(f)}}else{this.isSendPdFlagEach=this.isSendPdFlagEach+1;e=this.sendPosData[this.isSendPdFlag][this.isSendPdFlagEach];console.log("发送第"+this.isSendPdFlagEach+"帧"),this.SendDataFormatMessage(e)}}}},async SendDataFormatMessage(e){var t=[],a=65535,r=[];t.push(85),t.push(170);var s=e.length+3;t.push(s>>8&255),r.push(s>>8&255),t.push(255&s),r.push(255&s);for(let n=0;n<e.length;n++)t.push(e[n]),r.push(e[n]);for(let n of r)a=a>>8^this.Crc16_Table[255&(a^n)];t.push(a>>8&255),t.push(255&a);var o=0;for(let n=0;n<t.length;n++)o+=t[n];t.push(255&o),await this.characteristic.writeValue(new Uint8Array(t))},async Advance(){var e=[19,1];this.SendDataFormatMessage(e)},async UploadActionFileNames(){if(this.isLink){var e=[19,16];this.isOpention=!0,this.vOpentions=[],this.vOpentionsList=[],this.SendDataFormatMessage(e)}},addVoptions(e){this.vOpentions.push(e)},async performDance(){if(this.isLink&&""!=this.selectedOption){var e=Array.from(h().encode("Action/"+this.selectedOption,"GB18030")),t=[];t.push(19),t.push(23);for(let a=0;a<e.length;a++)t.push(e[a]);this.SendDataFormatMessage(t)}},async InProgrammingMode(){if(console.log(11),this.isLink){console.log(2);var e=[];e.push(19),e.push(230),this.isProgramme=!1,this.SendDataFormatMessage(e)}},async ControlJoints(){var e=[3,19,255,255,57,241,22,72,9,0,0,0,20,0,0,2,12,35,5,0,0,4,0,43,4,91,65,0,0,0,0,0,85,0,0,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10,14];this.SendDataFormatMessage(e)},async actionDownload(e){try{const t=e.target.files[0],a=new FileReader;a.readAsText(t,"UTF-8"),a.onload=async e=>{const t=e.target.result,a=t.trim().split("\n").length;this.dataArr=[];for(let G=0;G<a;G++){const e=t.split("\r\n")[G].split(",")[0],a=e.split(/\s+/).map((e=>isNaN(e)?e:""==e?" ":Number(e)));this.dataArr.push(a)}if(1==this.isLink&&0==this.isSendPosData){this.isSendPosData=!0,this.sendPosData=[[]],this.isSendPdFlag=0,this.isSendPdFlagEach=0;var r=[],s=[],o=this.dataArr,n=o.length;for(let t=0;t<n;t++){var i=!1;" "==o[t][0]&&(i=!0),253==o[t][0]&&253==o[t][1]&&254==o[t][2]&&" "!=o[t][3]&&r.push(o[t][3]),1==i&&s.push(o[t])}var l=0;n=s.length;var c=[];for(let t=0;t<n;t++){var u=s[t][5],h=s[t][6],p=s[t][7],d=s[t][8],m=s[t][9],g=s[t][10];for(let e=0;e<8;e++){let a=u&Math.pow(2,7-e);0!=a&&(s[t][e+11]*=-1)}for(let e=0;e<8;e++){let a=h&Math.pow(2,7-e);0!=a&&(s[t][e+19]*=-1)}for(let e=0;e<8;e++){let a=p&Math.pow(2,7-e);0!=a&&(s[t][e+27]*=-1)}for(let e=0;e<8;e++){let a=d&Math.pow(2,7-e);0!=a&&(s[t][e+35]*=-1)}for(let e=0;e<8;e++){let a=m&Math.pow(2,7-e);0!=a&&(s[t][e+43]*=-1)}for(let e=0;e<8;e++){let a=g&Math.pow(2,7-e);0!=a&&(s[t][51]*=-1)}var f=0,v=!1,_=!1;0!=s[t][4]&&s[t][4]>128?f=s[t][4]-128:0!=s[t][4]&&s[t][4]>128?(f=s[t][4],v=!1,_=!0):0==s[t][4]&&(v=!1,_=!1);var w=[],b=s[t][3];for(let e=0;e<48;e++)w[e]=s[t][e+11];var P=s[t][59],y=s[t][60],k=0,L=-1,M=-1;251!=s[t][61]&&251!=s[t][62]&&252!=s[t][61]&&252!=s[t][62]?(M=256*s[t][61]+s[t][62],k=2):251==s[t][61]&&251==s[t][62]?k=4:252==s[t][61]&&252==s[t][62]&&(k=3),L=M,0!=s[t][4]&&(v=0==l,s[t][4]<128?(_=!0,f=s[t][4]):(_=!1,f=s[t][4]-128)),l=s[t][4]>128?s[t][4]:0;var S={number:b,Name:1,Pos:w,Speed:P,Delay:y,Loop_Time:f,Is_Loop_Start:v,Is_Loop_End:_,Music_State:k,Music_Number:L};c.push(z(S))}this.sendPosDataNames=r,n=c.length;let e=0;f=-1;var D=!1,I=[[]],F=c[0].number;I[0]=[];for(let t=0;t<n;t++){F!=c[t].number&&(F=c[t].number,e++,I[e]=[]);var B=[];B.push(19),B.push(227),D||(B[2]=0),!D||c[t].Is_Loop_Start||c[t].Is_Loop_End||(B[2]=f+128),c[t].Is_Loop_End&&(D=!1,B[2]=f,f=0),c[t].Is_Loop_Start&&(D=!0,f=c[t].Loop_Time,B[2]=f+128);var A=0,T=0,N=0,x=0,C=0,U=0;for(let e=0;e<48;e++)e<8&&c[t].Pos[e]<0&&(A+=parseInt(Math.pow(2,7-e)),c[t].Pos[e]=-1*c[t].Pos[e]),e>=8&&e<16&&c[t].Pos[e]<0&&(T+=parseInt(Math.pow(2,15-e)),c[t].Pos[e]=-1*c[t].pos[e]),e>=16&&e<24&&c[t].Pos[e]<0&&(N+=parseInt(Math.pow(2,23-e)),c[t].Pos[e]=-1*c[t].Pos[e]),e>=24&&e<32&&c[t].Pos[e]<0&&(x+=parseInt(Math.pow(2,31-e)),c[t].Pos[e]=-1*c[t].Pos[e]),e>=32&&e<40&&c[t].Pos[e]<0&&(C+=parseInt(Math.pow(2,39-e)),c[t].Pos[e]=-1*c[t].Pos[e]),e>=40&&e<48&&c[t].Pos[e]<0&&(U+=parseInt(Math.pow(2,47-e)),c[t].Pos[e]=-1*c[t].Pos[e]);B[3]=A,B[4]=T,B[5]=N,B[6]=x,B[7]=C,B[8]=U;for(let e=0;e<48;e++)B[e+9]=c[t].Pos[e];switch(B[57]=c[t].Speed,B[58]=c[t].Delay,c[t].Music_State){case 1:B[59]=parseInt(c[t].Music_Number/256),B[60]=parseInt(c[t].Music_Number%256);break;case 2:B[59]=parseInt(c[t].Music_Number/256),B[60]=parseInt(c[t].Music_Number%256);break;case 3:B[59]=252,B[60]=252;break;case 4:I[59]=251,I[60]=251;break}I[e].push(B)}console.log(I),this.sendPosData=I;var E=this.sendPosDataNames[0],R=this.nameDataDispose(E),O=[];O.push(19),O.push(220);for(let t=0;t<R.length;t++)O.push(R[t]);console.log("创建首个动作文件"),this.SendDataFormatMessage(O)}}}catch(err){console.error(err)}},nameDataDispose(e){var t="Action/"+e+".sh",a=Array.from(h().encode(t,"GB18030"));return a}}};const qe=(0,d.Z)(Ze,[["render",Ve]]);var He=qe;const ze=(0,r._)("p",null,null,-1),je=(0,r._)("p",null,null,-1),Ye=(0,r._)("p",null,null,-1);function $e(e,t,a,s,o,n){const i=(0,r.up)("el-button"),l=(0,r.up)("el-option"),c=(0,r.up)("el-select");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(i,{onClick:n.connectToDevice},{default:(0,r.w5)((()=>[(0,r.Uk)("连接蓝牙设备(钢锁)")])),_:1},8,["onClick"]),ze,(0,r.Wm)(i,{onClick:n.UploadFileName},{default:(0,r.w5)((()=>[(0,r.Uk)("上传动作名称(龙型,人形两种)")])),_:1},8,["onClick"]),(0,r.Wm)(c,{modelValue:o.selectActionName,"onUpdate:modelValue":t[0]||(t[0]=e=>o.selectActionName=e)},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.actionNames,(e=>((0,r.wg)(),(0,r.j4)(l,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),(0,r.Wm)(i,{onClick:n.performDance},{default:(0,r.w5)((()=>[(0,r.Uk)("播放动作")])),_:1},8,["onClick"]),je,(0,r._)("input",{type:"file",onChange:t[1]||(t[1]=(...e)=>n.actionDownload&&n.actionDownload(...e))},null,32),(0,r.Uk)(" 下载 "),Ye,(0,r.Wm)(i,{onClick:n.GetMusic},{default:(0,r.w5)((()=>[(0,r.Uk)("获取机器人音乐")])),_:1},8,["onClick"])],64)}var Ke={data(){return{device:[],server:[],isLink:!1,characteristic:[],readDataList:[],actionNames:[],selectActionName:"",isAction:!1,isRobotAction:!1,actionExePorgress:0,isActionExePorgress:!1,sendPosDataNames:[],sendPosData:[[]],isSendPosData:!1,isSendPdFlag:0,isSendPdFlagEach:0,musicFlag:0}},methods:{async connectToDevice(){try{const e={acceptAllDevices:!0,optionalServices:[65504]};await navigator.bluetooth.requestDevice(e).then((async e=>{if(this.device=e,this.server=await this.device.gatt.connect(),await new Promise((e=>setTimeout(e,1e3))),this.server.connected){const e=await this.server.getPrimaryServices(65504);this.characteristic=await e[0].getCharacteristic(65505),this.characteristic.startNotifications(),this.characteristic.addEventListener("characteristicvaluechanged",this.ReadDataMessage),this.isLink=!0;var t=[];t.push(15),this.SendDataFormatMessage(t),console.log("连接成功")}else console.log("连接失败")}))}catch(err){err instanceof DOMException&&err.code===DOMException.NOT_FOUND_ERR?(this.isLink=!1,console.log("连接设备出错:",err)):(console.error("连接设备出错:",err),this.isLink=!1)}},async ReadDataMessage(e){const t=new Uint8Array(e.target.value.buffer);var a=t.length;for(let h=0;h<a;h++)this.readDataList.push(t[h]);a=this.readDataList.length;var r=[];for(let h=0;h<a;h++)if(255==this.readDataList[h]&&255==this.readDataList[h+1]){var s=this.readDataList[h+2];if(!(h+3+s<=a))return;var o=s;for(let e=0;e<s-1;e++)o+=this.readDataList[h+3+e];if(o%=256,o==this.readDataList[h+2+s]){var n=2+s+1,i=[];for(let e=0;e<n;e++)i.push(this.readDataList[h+e]);h=h+2+s,r.push(i)}}if(r.length>0){for(let e=0;e<r.length;e++)for(let t=0;t<r[e].length;t++)this.readDataList.shift();for(let t=0;t<r.length;t++)if(255==r[t][0]&&255==r[t][1]&&15==r[t][3]);else if(255==r[t][0]&&255==r[t][1]&&16==r[t][3]){var l=r[t].slice(4,r[t].length-1);console.log("2:"+l),this.actionNames.push("龙型:"+h().decode(l,"GB18030"))}else if(255==r[t][0]&&255==r[t][1]&&3==r[t][2]&&250==r[t][3]&&250==r[t][4]){if(this.isAction){this.isAction=!1;e=[];e.push(22);var c=Array.from(h().encode("RobotAction","GB18030"));for(let t=0;t<c.length;t++)e.push(c[t]);this.isRobotAction=!0,this.SendDataFormatMessage(e)}console.log("双Fa判断结果:"+this.musicFlag)}else if(255==r[t][0]&&255==r[t][1]&&3==r[t][2]&&250==r[t][3]&&253==r[t][4])console.log("fa fd判断结果:"+this.musicFlag);else if(255==r[t][0]&&255==r[t][1]&&22==r[t][3]){l=r[t].slice(4,r[t].length-1);this.actionNames.push("人型:"+h().decode(l,"GB18030"))}else if(255==r[t][0]&&255==r[t][1]&&3==r[t][2]&&250==r[t][3]&&252==r[t][4])this.isRobotAction&&(this.isRobotAction=!1);else if(255==r[t][0]&&255==r[t][1]&&23==r[t][3])this.actionExePorgress=r[t][4],100==r[t][4]&&(this.isActionExePorgress=!1);else if(255==r[t][0]&&255==r[t][1]&&220==r[t][3]&&79==r[t][4]&&75==r[t][5]){e=this.sendPosData[this.isSendPdFlag][0];console.log("第"+this.isSendPdFlag+"个动作文件创建成功，发送首帧"),this.SendDataFormatMessage(e)}else if(255==r[t][0]&&255==r[t][1]&&227==r[t][3]&&79==r[t][4]&&75==r[t][5]){a=this.sendPosData[this.isSendPdFlag].length;if(a-1==this.isSendPdFlagEach){if(this.isSendPdFlag=this.isSendPdFlag+1,this.sendPosDataNames.length==this.isSendPdFlag)console.log("动作文件发送完成"),this.isSendPosData=!1;else if(this.isSendPdFlag<this.sendPosDataNames.length){this.isSendPdFlagEach=0;var u=this.sendPosDataNames[this.isSendPdFlag],p=this.nameDataDispose(u),d=[];d.push(220);for(let e=0;e<p.length;e++)d.push(p[e]);console.log("发送第"+this.isSendPdFlag+"个动作文件"),this.SendDataFormatMessage(d)}}else{this.isSendPdFlagEach=this.isSendPdFlagEach+1;e=this.sendPosData[this.isSendPdFlag][this.isSendPdFlagEach];console.log("发送第"+this.isSendPdFlagEach+"帧"),this.SendDataFormatMessage(e)}}else if(255==r[t][0]&&255==r[t][1]&&24==r[t][3]){l=r[t].slice(4,r[t].length-1);console.log(h().decode(l,"GB18030")),this.musicFlag++}}},async SendDataFormatMessage(e){var t=[];t.push(255),t.push(255),t.push(e.length+1);var a=e.length+1;for(let r=0;r<e.length;r++)t.push(e[r]),a+=e[r];t.push(a%256),await this.characteristic.writeValue(new Uint8Array(t))},async UploadFileName(){if(this.isLink&&0==this.isAction&&0==this.isRobotAction){this.actionNames=[];var e=[];e.push(16),this.isAction=!0,this.SendDataFormatMessage(e)}},async performDance(){if(this.isLink&&""!=this.selectActionName&&0==this.isActionExePorgress){this.isActionExePorgress=!0,this.actionExePorgress=0;var e=this.selectActionName.substring(0,3),t=this.selectActionName.substring(3);"人型:"==e?e="RobotAction/":"龙型:"==e&&(e="Action/"),t=e+t;var a=Array.from(h().encode(t,"GB18030")),r=[];r.push(23);for(let e=0;e<a.length;e++)r.push(a[e]);this.SendDataFormatMessage(r)}},async actionDownload(e){var t=e.target.files[0],a=new FileReader;a.readAsText(t,"UTF-8"),a.onload=async e=>{const t=e.target.result,a=t.trim().split("\n").length;var r=[];for(let V=0;V<a;V++){const e=t.split("\r\n")[V].split(",")[0],a=e.split(/\s+/).map((e=>isNaN(e)?e:""==e?" ":Number(e)));r.push(a)}if(1==this.isLink&&0==this.isSendPosData){this.isSendPosData=!0,this.sendPosData=[[]],this.isSendPdFlag=0,this.isSendPdFlagEach=0;var s=[],o=[],n=r.length;for(let t=0;t<n;t++){var i=!1;" "==r[t][0]&&(i=!0),253==r[t][0]&&253==r[t][1]&&254==r[t][2]&&" "!=r[t][3]&&s.push(r[t][3]),1==i&&o.push(r[t])}var l=0;n=o.length;var c=[];for(let t=0;t<n;t++){var u=o[t][5],h=o[t][6],p=o[t][7],d=o[t][8],m=o[t][9],g=o[t][10];for(let e=0;e<8;e++){let a=u&Math.pow(2,7-e);0!=a&&(o[t][e+11]*=-1)}for(let e=0;e<8;e++){let a=h&Math.pow(2,7-e);0!=a&&(o[t][e+19]*=-1)}for(let e=0;e<8;e++){let a=p&Math.pow(2,7-e);0!=a&&(o[t][e+27]*=-1)}for(let e=0;e<8;e++){let a=d&Math.pow(2,7-e);0!=a&&(o[t][e+35]*=-1)}for(let e=0;e<8;e++){let a=m&Math.pow(2,7-e);0!=a&&(o[t][e+43]*=-1)}for(let e=0;e<8;e++){let a=g&Math.pow(2,7-e);0!=a&&(o[t][e+51]*=-1)}var f=0,v=!1,_=!1;0!=o[t][4]&&o[t][4]>128?f=o[t][4]-128:0!=o[t][4]&&o[t][4]<128?(f=o[t][4],v=!1,_=!0):0==o[t][4]&&(v=!1,_=!1);var w=[],b=o[t][3];for(let e=0;e<48;e++)w[e]=o[t][e+11];var P=o[t][59],y=o[t][60],k=0,L=-1,M=-1,S=0,D=o[t].length-2;63==D?(251!=o[t][61]&&251!=o[t][62]&&252!=o[t][61]&&252!=o[t][62]?(M=256*o[t][61]+o[t][62],k=2):251==o[t][61]&&251==o[t][62]?k=4:252==o[t][61]&&252==o[t][62]&&(k=3),L=M):61==D&&(M=0,k=2),S=o[t][o[t].length-2],L=M,0!=o[t][4]&&(v=0==l,o[t][4]<128?(_=!0,f=o[t][4]):(_=!1,f=o[t][4]-128)),l=o[t][4]>128?o[t][4]:0;var I={number:b,Name:1,Pos:w,Speed:P,Delay:y,Loop_Time:f,Is_Loop_Start:v,Is_Loop_End:_,Music_State:k,Music_Number:L,Is_Cur_Form:S};c.push(Fe(I))}this.sendPosDataNames=s,n=c.length;let e=0;f=-1;var F=!1,B=[[]],A=c[0].number;B[0]=[];for(let t=0;t<n;t++){A!=c[t].number&&(A=c[t].number,e++,B[e]=[]);var T=[];T.push(227),F||(T[1]=0),!F||c[t].Is_Loop_Start||c[t].Is_Loop_End||(T[1]=f+128),c[t].Is_Loop_End&&(F=!1,T[1]=f,f=0),c[t].Is_Loop_Start&&(F=!0,f=c[t].Loop_Time,T[1]=f+128);var N=0,x=0,C=0,U=0,E=0,R=0;for(let e=0;e<48;e++)e<8&&c[t].Pos[e]<0&&(N+=parseInt(Math.pow(2,7-e)),c[t].Pos[e]=-1*c[t].Pos[e]),e>=8&&e<16&&c[t].Pos[e]<0&&(x+=parseInt(Math.pow(2,15-e)),c[t].Pos[e]=-1*c[t].Pos[e]),e>=16&&e<24&&c[t].Pos[e]<0&&(C+=parseInt(Math.pow(2,23-e)),c[t].Pos[e]=-1*c[t].Pos[e]),e>=24&&e<32&&c[t].Pos[e]<0&&(U+=parseInt(Math.pow(2,31-e)),c[t].Pos[e]=-1*c[t].Pos[e]),e>=32&&e<40&&c[t].Pos[e]<0&&(E+=parseInt(Math.pow(2,39-e)),c[t].Pos[e]=-1*c[t].Pos[e]),e>=40&&e<48&&c[t].Pos[e]<0&&(R+=parseInt(Math.pow(2,47-e)),c[t].Pos[e]=-1*c[t].Pos[e]);T[2]=N,T[3]=x,T[4]=C,T[5]=U,T[6]=E,T[7]=R;for(let e=0;e<48;e++)T[e+8]=c[t].Pos[e];switch(T[56]=c[t].Speed,T[57]=c[t].Delay,c[t].Music_State){case 1:T[58]=parseInt(c[t].Music_Number/256),T[59]=parseInt(c[t].Music_Number%256);break;case 2:T[58]=parseInt(c[t].Music_Number/256),T[59]=parseInt(c[t].Music_Number%256);break;case 3:T[58]=252,T[59]=252;break;case 4:T[58]=251,T[59]=251;break}T[60]=c[t].Is_Cur_Form,B[e].push(T)}this.sendPosData=B;var O=this.sendPosDataNames[0],G=this.nameDataDispose(O),W=[];W.push(220);for(let t=0;t<G.length;t++)W.push(G[t]);console.log("创建首个动作文件"),this.SendDataFormatMessage(W)}}},nameDataDispose(e){var t=e.substring(0,3),a=e.substring(3);"人型:"==t?t="RobotAction/":"龙型:"==t&&(t="Action/"),a=t+a+".sh";var r=Array.from(h().encode(a,"GB18030"));return r},async GetMusic(){try{if(this.isLink){this.musicFlag=0;var e=[];e.push(24);var t=Array.from(h().encode("21","GB18030"));for(let a=0;a<t.length;a++)e.push(t[a]);this.SendDataFormatMessage(e)}}catch(err){console.error(err)}}}};const Je=(0,d.Z)(Ke,[["render",$e]]);var Qe=Je;const Xe=(0,r._)("p",null,null,-1);function et(e,t,a,s,o,n){const i=(0,r.up)("el-button");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(i,{onClick:n.connectToDevice},{default:(0,r.w5)((()=>[(0,r.Uk)("连接蓝牙设备")])),_:1},8,["onClick"]),Xe,(0,r.Wm)(i,{onClick:n.UploadActionFileNames},{default:(0,r.w5)((()=>[(0,r.Uk)("上传动作文件名")])),_:1},8,["onClick"])],64)}var tt={data(){return{isLink:!1,device:[],server:[],characteristic:[],Crc16_Table:[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448],vOpentions:[],vOpentionsList:[],selectedOption:"",isUpFileName:!1,upFileNameFlag:0,fileNameList:[]}},methods:{async connectToDevice(){try{const e={filters:[{namePrefix:"BUZZ"}],optionalServices:[65472]};await navigator.bluetooth.requestDevice(e).then((async e=>{if(this.device=e,this.server=await this.device.gatt.connect(),await new Promise((e=>setTimeout(e,1e3))),this.server.connected){console.log(1);const e=await this.server.getPrimaryServices(65472);this.characteristic=await e[0].getCharacteristic(65473),this.characteristic.startNotifications(),this.characteristic.addEventListener("characteristicvaluechanged",this.ReadDataMessage),this.isLink=!0}}))}catch(err){err instanceof DOMException&&err.code===DOMException.NOT_FOUND_ERR?(this.isLink=!1,console.log("连接设备出错:",err)):(this.isLink=!1,console.error(err))}},async ReadDataMessage(e){const t=new Uint8Array(e.target.value.buffer);console.log(t);var a=t.length;for(let p=0;p<a;p++)if(85==t[p]&&170==t[p+1]){var r=t[p+2],s=t[p+3],o=r<<8|s,n=t[p+4],i=t[p+5];if(19==n&&22==i){var l=t[p+3+o-2],c=t[p+3+o-1],u=l<<8|c,h=65535;for(let e=0;e<o-1;e++)h=h>>8^this.Crc16_Table[255&(h^t[p+2+e])];h==u?this.upFileNameFlag:console.log("验证失败")}}},async SendDataFormatMessage(e){var t=[],a=65535,r=[];t.push(85),t.push(170);var s=e.length+3;t.push(s>>8&255),r.push(s>>8&255),t.push(255&s),r.push(255&s);for(let n=0;n<e.length;n++)t.push(e[n]),r.push(e[n]);for(let n of r)a=a>>8^this.Crc16_Table[255&(a^n)];t.push(a>>8&255),t.push(255&a);var o=0;for(let n=0;n<t.length;n++)o+=t[n];t.push(255&o),console.log(t),await this.characteristic.writeValue(new Uint8Array(t))},async UploadActionFileNames(){if(this.isLink&&0==this.isUpFileName){this.isUpFileName=!0,this.upFileNameFlag=0;var e=[];e.push(19),e.push(22);var t=Array.from(h().encode("Action/rack","GB18030"));for(let a=0;a<t.length;a++)e.push(t[a]);console.log(e),this.SendDataFormatMessage(e)}}}};const at=(0,d.Z)(tt,[["render",et]]);var rt=at;const st=(0,r._)("h1",null,"测试抽象工厂",-1),ot=(0,r._)("br",null,null,-1),nt=(0,r._)("br",null,null,-1),it=(0,r._)("br",null,null,-1),lt=(0,r._)("label",null,"舵机号",-1),ct=(0,r._)("br",null,null,-1),ut=(0,r._)("label",null,"运动量",-1),ht=(0,r._)("br",null,null,-1),pt=(0,r._)("br",null,null,-1),dt=(0,r._)("br",null,null,-1),mt=(0,r._)("br",null,null,-1),gt=(0,r._)("br",null,null,-1),ft=(0,r._)("br",null,null,-1);function vt(e,t,a,s,o,n){const i=(0,r.up)("el-input"),l=(0,r.up)("el-option"),c=(0,r.up)("el-select");return(0,r.wg)(),(0,r.iD)(r.HY,null,[st,(0,r._)("button",{onClick:t[0]||(t[0]=(...e)=>n.connectToDevice&&n.connectToDevice(...e))},"连接"),(0,r._)("button",{onClick:t[1]||(t[1]=(...e)=>n.disconnectBT&&n.disconnectBT(...e))},"断开"),ot,(0,r._)("button",{onClick:t[2]||(t[2]=(...e)=>n.InitBTProgram&&n.InitBTProgram(...e))},"进入蓝牙编程模式"),(0,r._)("button",{onClick:t[3]||(t[3]=(...e)=>n.OffBTProgram&&n.OffBTProgram(...e))},"退出蓝牙编程模式"),nt,(0,r._)("button",{onClick:t[4]||(t[4]=(...e)=>n.SetUpServoLock&&n.SetUpServoLock(...e))},"上锁"),(0,r._)("button",{onClick:t[5]||(t[5]=(...e)=>n.SetDomnBTProgram&&n.SetDomnBTProgram(...e))},"解锁"),it,lt,(0,r.Wm)(i,{style:{width:"50px"},modelValue:o.axisNumber,"onUpdate:modelValue":t[6]||(t[6]=e=>o.axisNumber=e)},null,8,["modelValue"]),ct,ut,(0,r.Wm)(i,{style:{width:"50px"},modelValue:o.axisValue,"onUpdate:modelValue":t[7]||(t[7]=e=>o.axisValue=e)},null,8,["modelValue"]),ht,(0,r._)("button",{onClick:t[8]||(t[8]=(...e)=>n.Achsebewegung&&n.Achsebewegung(...e))},"单轴运动"),pt,(0,r._)("button",{onClick:t[9]||(t[9]=(...e)=>n.GetFileNames&&n.GetFileNames(...e))},"获取文件名"),(0,r.Wm)(c,{modelValue:o.selectActionName,"onUpdate:modelValue":t[10]||(t[10]=e=>o.selectActionName=e)},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.actionNames,(e=>((0,r.wg)(),(0,r.j4)(l,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),dt,(0,r._)("button",{onClick:t[11]||(t[11]=(...e)=>n.ExistsFileName&&n.ExistsFileName(...e))},"判断文件名是否存在"),mt,(0,r._)("button",{onClick:t[12]||(t[12]=(...e)=>n.ExecuteAction&&n.ExecuteAction(...e))},"绝对路径执行动作文件"),gt,(0,r._)("button",{onClick:t[13]||(t[13]=(...e)=>n.GetRobotAxisLocation&&n.GetRobotAxisLocation(...e))},"获取机器人当前位置"),ft,(0,r._)("button",{onClick:t[14]||(t[14]=(...e)=>n.UploadActionInRobot&&n.UploadActionInRobot(...e))},"绝对的路径将动作上传到机器人当中")],64)}class _t{GetFactory(e){}}class wt{async RobotBlueToothConntect(e){}async RobotBlueToothBreak(){}async IntoBlueToothProgram(){}async OffBlueToothProgram(){}async SetServoLock(e){}async Achsebewegung(e){}async GetFileNames(){}async ExistsFileName(e){}async ExecuteAction(e){}async GetProgressValue(){}async GetRobotAxisLocation(){}async UploadActionInRobot(e,t){}}var bt=a(7327);class Pt{}(0,bt.Z)(Pt,"succeed","1000"),(0,bt.Z)(Pt,"fail","1001"),(0,bt.Z)(Pt,"timeout","1002"),(0,bt.Z)(Pt,"ununited","1003"),(0,bt.Z)(Pt,"isErr","1004"),(0,bt.Z)(Pt,"callOff","1005"),(0,bt.Z)(Pt,"stateless","1006");var yt=null,kt=null,Lt=!1,Mt=!1,St=!1,Dt=!1,It=!1,Ft=!1,Bt=!1,At=-1,Tt=[],Nt=[],xt=null,Ct=null,Ut=[],Et=[],Rt=0,Ot=[],Gt=[];class Wt extends wt{async RobotBlueToothConntect(e){try{if(yt=null,yt=await e.gatt.connect(),await new Promise((e=>setTimeout(e,1e3))),kt=null,Lt=!1,Nt=[],Tt=[],xt=null,Ct=null,Ut=[],yt.connected){const t=await yt.getPrimaryServices(65504);return kt=await t[0].getCharacteristic(65505),kt.startNotifications(),kt.addEventListener("characteristicvaluechanged",this.ReadDataMessage),Lt=!0,xt=setInterval((()=>{this.SendDataMessage()}),80),Ct=setInterval((()=>{e.gatt.connected||(clearInterval(Ct),this.onDisconnected())}),1e3),{BlueLink:Pt.succeed,Meg:"连接成功！",instance:this,modelNumber:"CTGEN"}}return{BlueLink:Pt.fail,Meg:"链接失败"}}catch(err){return Lt=!1,{BlueLink:Pt.isErr,Meg:err}}}async ReadDataMessage(e){const t=new Uint8Array(e.target.value.buffer);var a=t.length;for(let h=0;h<a;h++)Tt.push(t[h]);a=Tt.length;var r=[];for(let h=0;h<a;h++)if(255==Tt[h]&&255==Tt[h+1]){var s=Tt[h+2];if(!(h+3+s<=a))return;var o=s;for(let e=0;e<s-1;e++)o+=Tt[h+3+e];if(o%=256,o==Tt[h+2+s]){var n=2+s+1,i=[];for(let e=0;e<n;e++)i.push(Tt[h+e]);h=h+2+s,r.push(i)}}if(r.length>0){for(let e=0;e<r.length;e++)for(let t=0;t<r[e].length;t++)Tt.shift();for(let t=0;t<r.length;t++)if(console.log(r[t]),255==r[t][0]&&255==r[t][1]&&230==r[t][3]){if(3==r[t][2]&&230==r[t][4]&&207==r[t][5])Mt=!0;else if(r[t][2]>=48){var l=[];for(let e=0;e<48;e++)l.push(r[t][4+e]);Ut.push(l)}}else if(255==r[t][0]&&255==r[t][1]&&231==r[t][3])3==r[t][2]&&231==r[t][4]&&209==r[t][5]&&(St=!0);else if(255==r[t][0]&&255==r[t][1]&&237==r[t][3])3==r[t][2]&&237==r[t][4]&&221==r[t][5]&&(Dt=!0);else if(255==r[t][0]&&255==r[t][1]&&22==r[t][3]){var c=r[t].slice(4,r[t].length-1);Et.push(h().decode(c,"GB18030"))}else if(255==r[t][0]&&255==r[t][1]&&3==r[t][2]&&250==r[t][3]&&252==r[t][4])It=!0;else if(255==r[t][0]&&255==r[t][1]&&225==r[t][3])79==r[t][4]&&75==r[t][5]?At=1:78==r[t][4]&&78==r[t][5]?At=0:69==r[t][4]&&69==r[t][5]&&(At=2);else if(255==r[t][0]&&255==r[t][1]&&23==r[t][3])Rt=r[t][4];else if(255==r[t][0]&&255==r[t][1]&&233==r[t][3]){var u=r[t][2]-2;for(let e=0;e<u;e++)Ot.push(r[t][4+e]),Ft=!0}else if(255==r[t][0]&&255==r[t][1]&&220==r[t][3]&&79==r[t][4]&&75==r[t][5]){e=Gt.shift();this.SendDataFormat(e)}else if(255==r[t][0]&&255==r[t][1]&&227==r[t][3]&&79==r[t][4]&&75==r[t][5])if(Gt.length>0){e=Gt.shift();this.SendDataFormat(e)}else Bt=!0}}async SendDataMessage(){if(1==Lt){var e=Nt.length;for(let a=0;a<e;a++){let e=new Promise(((e,t)=>{setTimeout((()=>e()),50)}));await e;var t=Nt.shift();await kt.writeValue(new Uint8Array(t))}}}SendDataFormat(e){var t=[];t.push(255),t.push(255),t.push(e.length+1);var a=e.length+1;for(let r=0;r<e.length;r++)t.push(e[r]),a+=e[r];t.push(a%256),Nt.push(t)}onDisconnected(){clearInterval(xt),kt.removeEventListener("characteristicvaluechanged",this.ReadDataMessage),Nt=[],Tt=[],Lt=null,kt=null,yt=null,Ut=[],console.log("机器人已经断开")}async RobotBlueToothBreak(){try{const e=await navigator.bluetooth.getAvailability();if(e)return yt.disconnect(),clearInterval(Ct),this.onDisconnected(),{BlueLink:Pt.succeed,Meg:"断开成功！"}}catch(err){return{BlueLink:Pt.isErr,Meg:err}}}async IntoBlueToothProgram(){try{if(Lt){var e;Mt=!1;var t=[];t.push(230),this.SendDataFormat(t);const a=await Promise.race([new Promise(((t,a)=>{const r=setInterval((()=>{Mt&&(clearInterval(r),clearTimeout(e),t())}),100);e=setTimeout((()=>{clearInterval(r),t()}),1e4)})).then((()=>Mt?{BlueLink:Pt.succeed,Meg:"请求成功",value:Ut}:{BlueLink:Pt.timeout,Meg:"请求超时"}))]);return a}return{BlueLink:Pt.ununited,Meg:"蓝牙没有连接"}}catch(err){return{BlueLink:Pt.fail,Meg:err}}}async OffBlueToothProgram(){try{if(Lt){var e;St=!1;var t=[];t.push(231),this.SendDataFormat(t);const a=await new Promise(((t,a)=>{const r=setInterval((()=>{St&&(clearInterval(r),clearTimeout(e),t())}),100);e=setTimeout((()=>{clearInterval(r),t()}),1e4)})).then((()=>St?{BlueLink:Pt.succeed,Meg:"请求成功"}:{BlueLink:Pt.timeout,Meg:"请求超时"}));return a}return{BlueLink:Pt.ununited,Meg:"蓝牙没有连接"}}catch(err){return{BlueLink:Pt.fail,Meg:err}}}async SetServoLock(e){try{if(Lt){var t;Dt=!1;var a=[];a.push(237);var r=e.length;for(let t=0;t<r;t++)a.push(e[t]);this.SendDataFormat(a);const s=await new Promise(((e,a)=>{const r=setInterval((()=>{Dt&&(clearInterval(r),clearTimeout(t),e())}),100);t=setTimeout((()=>{clearInterval(r),e()}),1e4)})).then((()=>Dt?{BlueLink:Pt.succeed,Meg:"请求成功"}:{BlueLink:Pt.timeout,Meg:"请求超时"}));return s}return{BlueLink:Pt.ununited,Meg:"蓝牙没有连接"}}catch(err){return{BlueLink:Pt.fail,Meg:err}}}async Achsebewegung(e){try{if(!Lt)return{BlueLink:Pt.ununited,Meg:"蓝牙没有连接"};var t=[];t.push(232);var a=e.length;for(let r=0;r<a;r++)t.push(e[r]);this.SendDataFormat(t)}catch(err){return{BlueLink:Pt.fail,Meg:err}}}async GetFileNames(){try{if(Lt){var e;It=!1,Et=[];var t=[];t.push(22);var a=Array.from(h().encode("Action","GB18030"));for(let e=0;e<a.length;e++)t.push(a[e]);this.SendDataFormat(t);const r=await new Promise(((t,a)=>{const r=setInterval((()=>{It&&(clearInterval(r),clearTimeout(e),t())}),100);e=setTimeout((()=>{clearInterval(r),t()}),15e3)})).then((()=>It?{BlueLink:Pt.succeed,Meg:"请求成功",value:Et}:{BlueLink:Pt.timeout,Meg:"请求超时"}));return r}return{BlueLink:Pt.ununited,Meg:"蓝牙没有连接"}}catch(err){return{BlueLink:Pt.fail,Meg:err}}}async ExistsFileName(e){try{if(Lt){var t;At=-1;var a=[];a.push(225);var r=Array.from(h().encode("Action/"+e+".sh","GB18030"));for(let e=0;e<r.length;e++)a.push(r[e]);this.SendDataFormat(a);const s=await new Promise(((e,a)=>{const r=setInterval((()=>{At>-1&&(clearInterval(r),clearTimeout(t),e())}),100);t=setTimeout((()=>{clearInterval(r),e()}),1e4)})).then((()=>At>-1?{BlueLink:Pt.succeed,Meg:"请求成功",value:At}:{BlueLink:Pt.timeout,Meg:"请求超时"}));return s}return{BlueLink:Pt.ununited,Meg:"未连接"}}catch(err){return{BlueLink:Pt.fail,Meg:err}}}async ExecuteAction(e){try{if(Lt){Rt=0;var t=Array.from(h().encode("Action/"+e,"GB18030")),a=[];a.push(23);for(let e=0;e<t.length;e++)a.push(t[e]);return this.SendDataFormat(a),{BlueLink:Pt.stateless,Meg:"进入发送队列，无返回值"}}return{BlueLink:Pt.fail,Meg:err}}catch(err){return{BlueLink:Pt.fail,Meg:err}}}async GetProgressValue(){return Lt?{BlueLink:Pt.succeed,Meg:"请求成功",value:Rt}:{BlueLink:Pt.ununited,Meg:"未连接"}}async GetRobotAxisLocation(){try{if(Lt){var e;Ft=!1,Ot=[];var t=[];t.push(233),this.SendDataFormat(t);const a=await new Promise(((t,a)=>{const r=setInterval((()=>{Ft&&(clearInterval(r),clearTimeout(e),t())}),100);e=setTimeout((()=>{clearInterval(r),t()}),1e4)})).then((()=>Ft?{BlueLink:Pt.succeed,Meg:"请求成功",value:Ot}:{BlueLink:Pt.timeout,Meg:"请求超时"}));return a}return{BlueLink:Pt.ununited,Meg:"未连接"}}catch(err){return{BlueLink:Pt.fail,Meg:err}}}async UploadActionInRobot(e,t){try{if(Lt){var a=t.length,r=!1,s=[];Gt=[],Bt=!1;for(let e=0;e<a;e++){var o=[];o.push(227),r||(o[1]=0),!r||t[e].Is_Loop_Start||t[e].Is_Loop_End||(o[1]=Loop_Time+128),t[e].Is_Loop_End&&(r=!1,o[1]=Loop_Time,Loop_Time=0),t[e].Is_Loop_Start&&(r=!0,Loop_Time=t[e].Loop_Time,o[1]=Loop_Time+128);var n=0,i=0,l=0,c=0,u=0,p=0;for(let a=0;a<48;a++)a<8&&t[e].Pos[a]<0&&(n+=parseInt(Math.pow(2,7-a)),t[e].Pos[a]=-1*t[e].Pos[a]),a>=8&&a<16&&t[e].Pos[a]<0&&(i+=parseInt(Math.pow(2,15-a)),t[e].Pos[a]=-1*t[e].Pos[a]),a>=16&&a<24&&t[e].Pos[a]<0&&(l+=parseInt(Math.pow(2,23-a)),t[e].Pos[a]=-1*t[e].Pos[a]),a>=24&&a<32&&t[e].Pos[a]<0&&(c+=parseInt(Math.pow(2,31-a)),t[e].Pos[a]=-1*t[e].Pos[a]),a>=32&&a<40&&t[e].Pos[a]<0&&(u+=parseInt(Math.pow(2,39-a)),t[e].Pos[a]=-1*t[e].Pos[a]),a>=40&&a<48&&t[e].Pos[a]<0&&(u+=parseInt(Math.pow(2,47-a)),t[e].Pos[a]=-1*t[e].Pos[a]);o[2]=n,o[3]=i,o[4]=l,o[5]=c,o[6]=u,o[7]=p;for(let a=0;a<48;a++)o[a+8]=t[e].Pos[a];switch(o[56]=t[e].Speed,o[57]=t[e].Delay,t[e].Music_State){case 1:case 2:o[58]=parseInt(t[e].Music_Number/256),o[59]=parseInt(t[e].Music_Number%256);break;case 3:o[58]=252,o[59]=252;break;case 4:o[58]=251,o[59]=251;break;case 5:o[58]=250,o[59]=250;break}s.push(o)}Gt=s;var d=[];d.push(220),e="Action/"+e+".sh";var m=Array.from(h().encode(e,"GB18030"));for(let e=0;e<m.length;e++)d.push(m[e]);this.SendDataFormat(d);const g=await new Promise(((e,t)=>{const a=setInterval((()=>{Bt&&(clearInterval(a),clearTimeout(timeoutId),e())}),100);timeoutId=setTimeout((()=>{clearInterval(a),e()}),3e4)})).then((()=>Bt?{BlueLink:Pt.succeed,Meg:"请求成功"}:{BlueLink:Pt.timeout,Meg:"请求超时"}));return g}return{BlueLink:Pt.ununited,Meg:"未连接"}}catch(err){return{BlueLink:Pt.fail,Meg:err}}}}var Vt=null,Zt=null,qt=!1,Ht=!1,zt=!1,jt=!1,Yt=!1,$t=!1,Kt=!1,Jt=-1,Qt=[],Xt=[],ea=null,ta=null,aa=[],ra=[],sa=0,oa=[],na=[];class ia extends wt{async RobotBlueToothConntect(e){try{if(Vt=null,Vt=await e.gatt.connect(),await new Promise((e=>setTimeout(e,1e3))),Zt=null,qt=!1,Xt=[],Qt=[],ea=null,ta=null,aa=[],Vt.connected){const t=await Vt.getPrimaryServices(65504);return Zt=await t[0].getCharacteristic(65505),Zt.startNotifications(),Zt.addEventListener("characteristicvaluechanged",this.ReadDataMessage),qt=!0,ea=setInterval((()=>{this.SendDataMessage()}),80),ta=setInterval((()=>{e.gatt.connected||(clearInterval(ta),this.onDisconnected())}),1e3),{BlueLink:Pt.succeed,Meg:"连接成功！",instance:this,modelNumber:"OP"}}return{BlueLink:Pt.fail,Meg:"链接失败"}}catch(err){return qt=!1,{BlueLink:Pt.isErr,Meg:err}}}async ReadDataMessage(e){const t=new Uint8Array(e.target.value.buffer);var a=t.length;for(let h=0;h<a;h++)Qt.push(t[h]);a=Qt.length;var r=[];for(let h=0;h<a;h++)if(255==Qt[h]&&255==Qt[h+1]){var s=Qt[h+2];if(!(h+3+s<=a))return;var o=s;for(let e=0;e<s-1;e++)o+=Qt[h+3+e];if(o%=256,o==Qt[h+2+s]){var n=2+s+1,i=[];for(let e=0;e<n;e++)i.push(Qt[h+e]);h=h+2+s,r.push(i)}}if(r.length>0){for(let e=0;e<r.length;e++)for(let t=0;t<r[e].length;t++)Qt.shift();for(let t=0;t<r.length;t++)if(console.log(r[t]),255==r[t][0]&&255==r[t][1]&&230==r[t][3]){if(3==r[t][2]&&230==r[t][4]&&207==r[t][5])Ht=!0;else if(r[t][2]>=48){var l=[];for(let e=0;e<48;e++)l.push(r[t][4+e]);aa.push(l)}}else if(255==r[t][0]&&255==r[t][1]&&231==r[t][3])3==r[t][2]&&231==r[t][4]&&209==r[t][5]&&(zt=!0);else if(255==r[t][0]&&255==r[t][1]&&237==r[t][3])3==r[t][2]&&237==r[t][4]&&221==r[t][5]&&(jt=!0);else if(255==r[t][0]&&255==r[t][1]&&22==r[t][3]){var c=r[t].slice(4,r[t].length-1);ra.push(h().decode(c,"GB18030"))}else if(255==r[t][0]&&255==r[t][1]&&3==r[t][2]&&250==r[t][3]&&252==r[t][4])Yt=!0;else if(255==r[t][0]&&255==r[t][1]&&225==r[t][3])79==r[t][4]&&75==r[t][5]?Jt=1:78==r[t][4]&&78==r[t][5]?Jt=0:69==r[t][4]&&69==r[t][5]&&(Jt=2);else if(255==r[t][0]&&255==r[t][1]&&23==r[t][3])sa=r[t][4];else if(255==r[t][0]&&255==r[t][1]&&233==r[t][3]){var u=r[t][2]-2;for(let e=0;e<u;e++)oa.push(r[t][4+e]),$t=!0}else if(255==r[t][0]&&255==r[t][1]&&220==r[t][3]&&79==r[t][4]&&75==r[t][5]){e=na.shift();var p=[];p.push(255),p.push(255),p.push(e.length+1);o=e.length+1;for(let t=0;t<e.length;t++)p.push(e[t]),o+=e[t];p.push(o%256),Xt.push(p)}else if(255==r[t][0]&&255==r[t][1]&&227==r[t][3]&&79==r[t][4]&&75==r[t][5])if(na.length>0){e=na.shift(),p=[];p.push(255),p.push(255),p.push(e.length+1);o=e.length+1;for(let t=0;t<e.length;t++)p.push(e[t]),o+=e[t];p.push(o%256),Xt.push(p)}else Kt=!0}}async SendDataMessage(){if(1==qt){var e=Xt.length;for(let a=0;a<e;a++){let e=new Promise(((e,t)=>{setTimeout((()=>e()),50)}));await e;var t=Xt.shift();await Zt.writeValue(new Uint8Array(t))}}}async SendDataFormat(e){var t=[];t.push(255),t.push(255),t.push(e.length+1);var a=e.length+1;for(let r=0;r<e.length;r++)t.push(e[r]),a+=e[r];t.push(a%256),Xt.push(t)}onDisconnected(){clearInterval(ea),Zt.removeEventListener("characteristicvaluechanged",this.ReadDataMessage),Xt=[],Qt=[],qt=null,Zt=null,Vt=null,aa=[],console.log("机器人已经断开")}async RobotBlueToothBreak(){try{const e=await navigator.bluetooth.getAvailability();if(e)return Vt.disconnect(),clearInterval(ta),this.onDisconnected(),{BlueLink:Pt.succeed,Meg:"断开成功！"}}catch(err){return{BlueLink:Pt.isErr,Meg:err}}}async IntoBlueToothProgram(){try{if(qt){var e;Ht=!1;var t=[];t.push(230),this.SendDataFormat(t);const a=await Promise.race([new Promise(((t,a)=>{const r=setInterval((()=>{Ht&&(clearInterval(r),clearTimeout(e),t())}),100);e=setTimeout((()=>{clearInterval(r),t()}),1e4)})).then((()=>Ht?{BlueLink:Pt.succeed,Meg:"请求成功",value:aa}:{BlueLink:Pt.timeout,Meg:"请求超时"}))]);return a}return{BlueLink:Pt.ununited,Meg:"蓝牙没有连接"}}catch(err){return{BlueLink:Pt.fail,Meg:err}}}async OffBlueToothProgram(){try{if(qt){var e;zt=!1;var t=[];t.push(231),this.SendDataFormat(t);const a=await new Promise(((t,a)=>{const r=setInterval((()=>{zt&&(clearInterval(r),clearTimeout(e),t())}),100);e=setTimeout((()=>{clearInterval(r),t()}),1e4)})).then((()=>zt?{BlueLink:Pt.succeed,Meg:"请求成功"}:{BlueLink:Pt.timeout,Meg:"请求超时"}));return a}return{BlueLink:Pt.ununited,Meg:"蓝牙没有连接"}}catch(err){return{BlueLink:Pt.fail,Meg:err}}}async SetServoLock(e){try{if(qt){var t;jt=!1;var a=[];a.push(237);var r=e.length;for(let t=0;t<r;t++)a.push(e[t]);this.SendDataFormat(a);const s=await new Promise(((e,a)=>{const r=setInterval((()=>{jt&&(clearInterval(r),clearTimeout(t),e())}),100);t=setTimeout((()=>{clearInterval(r),e()}),1e4)})).then((()=>jt?{BlueLink:Pt.succeed,Meg:"请求成功"}:{BlueLink:Pt.timeout,Meg:"请求超时"}));return s}return{BlueLink:Pt.ununited,Meg:"蓝牙没有连接"}}catch(err){return{BlueLink:Pt.fail,Meg:err}}}async Achsebewegung(e){try{if(!qt)return{BlueLink:Pt.ununited,Meg:"蓝牙没有连接"};var t=[];t.push(232);var a=e.length;for(let r=0;r<a;r++)t.push(e[r]);this.SendDataFormat(t)}catch(err){return{BlueLink:Pt.fail,Meg:err}}}async GetFileNames(){try{if(qt){var e;Yt=!1,ra=[];var t=[];t.push(22);var a=Array.from(h().encode("Action","GB18030"));for(let e=0;e<a.length;e++)t.push(a[e]);this.SendDataFormat(t);const r=await new Promise(((t,a)=>{const r=setInterval((()=>{Yt&&(clearInterval(r),clearTimeout(e),t())}),100);e=setTimeout((()=>{clearInterval(r),t()}),15e3)})).then((()=>Yt?{BlueLink:Pt.succeed,Meg:"请求成功",value:ra}:{BlueLink:Pt.timeout,Meg:"请求超时"}));return r}return{BlueLink:Pt.ununited,Meg:"蓝牙没有连接"}}catch(err){return{BlueLink:Pt.fail,Meg:err}}}async ExistsFileName(e){try{if(qt){var t;Jt=-1;var a=[];a.push(225);var r=Array.from(h().encode("Action/"+e+".sh","GB18030"));for(let e=0;e<r.length;e++)a.push(r[e]);this.SendDataFormat(a);const s=await new Promise(((e,a)=>{const r=setInterval((()=>{Jt>-1&&(clearInterval(r),clearTimeout(t),e())}),100);t=setTimeout((()=>{clearInterval(r),e()}),1e4)})).then((()=>Jt>-1?{BlueLink:Pt.succeed,Meg:"请求成功",value:Jt}:{BlueLink:Pt.timeout,Meg:"请求超时"}));return s}return{BlueLink:Pt.ununited,Meg:"未连接"}}catch(err){return{BlueLink:Pt.fail,Meg:err}}}async ExecuteAction(e){try{if(qt){sa=0;var t=Array.from(h().encode("Action/"+e,"GB18030")),a=[];a.push(23);for(let e=0;e<t.length;e++)a.push(t[e]);return this.SendDataFormat(a),{BlueLink:Pt.stateless,Meg:"进入发送队列，无返回值"}}return{BlueLink:Pt.fail,Meg:err}}catch(err){return{BlueLink:Pt.fail,Meg:err}}}async GetProgressValue(){return qt?{BlueLink:Pt.succeed,Meg:"请求成功",value:sa}:{BlueLink:Pt.ununited,Meg:"未连接"}}async GetRobotAxisLocation(){try{if(qt){var e;$t=!1,oa=[];var t=[];t.push(233),this.SendDataFormat(t);const a=await new Promise(((t,a)=>{const r=setInterval((()=>{$t&&(clearInterval(r),clearTimeout(e),t())}),100);e=setTimeout((()=>{clearInterval(r),t()}),1e4)})).then((()=>$t?{BlueLink:Pt.succeed,Meg:"请求成功",value:oa}:{BlueLink:Pt.timeout,Meg:"请求超时"}));return a}return{BlueLink:Pt.ununited,Meg:"未连接"}}catch(err){return{BlueLink:Pt.fail,Meg:err}}}async UploadActionInRobot(e,t){try{if(qt){var a,r=t.length,s=-1,o=!1,n=[];na=[],Kt=!1;for(let e=0;e<r;e++){var i=[];i.push(227),o||(i[1]=0),!o||t[e].Is_Loop_Start||t[e].Is_Loop_End||(i[1]=s+128),t[e].Is_Loop_End&&(o=!1,i[1]=s,s=0),t[e].Is_Loop_Start&&(o=!0,s=t[e].Loop_Time,i[1]=s+128);var l=0,c=0,u=0,p=0,d=0,m=0;for(let a=0;a<48;a++)a<8&&t[e].Pos[a]<0&&(l+=parseInt(Math.pow(2,7-a)),t[e].Pos[a]=-1*t[e].Pos[a]),a>=8&&a<16&&t[e].Pos[a]<0&&(c+=parseInt(Math.pow(2,15-a)),t[e].Pos[a]=-1*t[e].Pos[a]),a>=16&&a<24&&t[e].Pos[a]<0&&(u+=parseInt(Math.pow(2,23-a)),t[e].Pos[a]=-1*t[e].Pos[a]),a>=24&&a<32&&t[e].Pos[a]<0&&(p+=parseInt(Math.pow(2,31-a)),t[e].Pos[a]=-1*t[e].Pos[a]),a>=32&&a<40&&t[e].Pos[a]<0&&(d+=parseInt(Math.pow(2,39-a)),t[e].Pos[a]=-1*t[e].Pos[a]),a>=40&&a<48&&t[e].Pos[a]<0&&(d+=parseInt(Math.pow(2,47-a)),t[e].Pos[a]=-1*t[e].Pos[a]);i[2]=l,i[3]=c,i[4]=u,i[5]=p,i[6]=d,i[7]=m;for(let a=0;a<48;a++)i[a+8]=t[e].Pos[a];switch(i[56]=t[e].Speed,i[57]=t[e].Delay,t[e].Music_State){case 1:case 2:i[58]=parseInt(t[e].Music_Number/256),i[59]=parseInt(t[e].Music_Number%256);break;case 3:i[58]=252,i[59]=252;break;case 4:i[58]=251,i[59]=251;break;case 5:i[58]=250,i[59]=250;break}n.push(i)}na=n;var g=[];g.push(220),e="Action/"+e+".sh";var f=Array.from(h().encode(e,"GB18030"));for(let e=0;e<f.length;e++)g.push(f[e]);this.SendDataFormat(g);const v=await new Promise(((e,t)=>{const r=setInterval((()=>{Kt&&(clearInterval(r),clearTimeout(a),e())}),100);a=setTimeout((()=>{clearInterval(r),e()}),3e4)})).then((()=>Kt?{BlueLink:Pt.succeed,Meg:"请求成功"}:{BlueLink:Pt.timeout,Meg:"请求超时"}));return v}return{BlueLink:Pt.ununited,Meg:"未连接"}}catch(err){return{BlueLink:Pt.fail,Meg:err}}}}var la=null;class ca extends _t{async BlueToothDispose(){try{const t={filters:[{namePrefix:"K1"},{namePrefix:"OP"},{namePrefix:"GSEG"},{namePrefix:"CTGEN"}],optionalServices:[65504]};var e=null;return await navigator.bluetooth.requestDevice(t).then((async t=>{la=t.name.startsWith("OP")?this.GetFactory(0):t.name.startsWith("CTGEN")?this.GetFactory(1):null,e=null!=la?await la.RobotBlueToothConntect(t):{BlueLink:Pt.fail,Meg:"无该型号机器人"}})),e}catch(err){return{BlueLink:Pt.isErr,Meg:err}}}GetFactory(e){var t=null;switch(e){case 0:t=new ia;break;case 1:t=new Wt;break;default:t=null;break}return t}}class ua{constructor({Pos:e,Speed:t,Delay:a,Loop_Time:r,Is_Loop_Start:s,Is_Loop_End:o,Music_State:n,Music_Number:i}){this.Pos=e,this.Speed=t,this.Delay=a,this.Loop_Time=r,this.Is_Loop_Start=s,this.Is_Loop_End=o,this.Music_State=n,this.Music_Number=i}}function ha(e){return new ua({Pos:e.Pos,Speed:e.Speed,Delay:e.Delay,Loop_Time:e.Loop_Time,Is_Loop_Start:e.Is_Loop_Start,Is_Loop_End:e.Is_Loop_End,Music_State:e.Music_State,Music_Number:e.Music_Number})}var pa={data(){return{robotTest:[],axisNumber:0,axisValue:0,robotFormParameter:[],actionNames:[],selectActionName:""}},methods:{async connectToDevice(){this.robotTest=new ca;const e=await this.robotTest.BlueToothDispose();console.log(e),e.BlueLink==Pt.succeed?this.robotTest=e.instance:console.log("没链接")},async disconnectBT(){this.robotTest.RobotBlueToothBreak()},async InitBTProgram(){var e=await this.robotTest.IntoBlueToothProgram();console.log(e),e.BlueLink==Pt.succeed&&(this.robotFormParameter=e.value)},async OffBTProgram(){var e=await this.robotTest.OffBlueToothProgram();console.log(e)},async SetUpServoLock(){var e=[];for(let a=0;a<48;a++)e.push(1);var t=await this.robotTest.SetServoLock(e);console.log(t)},async SetDomnBTProgram(){var e=[];for(let a=0;a<48;a++)e.push(0);var t=await this.robotTest.SetServoLock(e);console.log(t)},async Achsebewegung(){if(this.robotFormParameter.length>0){var e=[];for(let a=0;a<this.robotFormParameter[0].length;a++){var t=0;t=a==this.axisNumber?this.robotFormParameter[0][a]+parseInt(this.axisValue):this.robotFormParameter[0][a],e.push(t)}e.push(35),await this.robotTest.Achsebewegung(e)}},async GetFileNames(){var e=await this.robotTest.GetFileNames();console.log(e),this.selectActionName="",e.BlueLink==Pt.succeed&&(this.actionNames=e.value)},async ExistsFileName(){var e=await this.robotTest.ExistsFileName("窜");console.log(e)},async ExecuteAction(){var e=await this.robotTest.ExecuteAction(this.selectActionName);console.log(e)},async GetRobotAxisLocation(){var e=await this.robotTest.GetRobotAxisLocation();console.log(e)},async UploadActionInRobot(){var e="测试的动作123",t=[],a=[];for(let c=0;c<48;c++)a.push(0);var r={Pos:a,Speed:30,Delay:0,Loop_Time:0,Is_Loop_Start:!1,Is_Loop_End:!1,Music_State:2,Music_Number:0};t.push(ha(r));var s={Pos:a,Speed:30,Delay:0,Loop_Time:2,Is_Loop_Start:!0,Is_Loop_End:!1,Music_State:3,Music_Number:0};t.push(ha(s));var o={Pos:a,Speed:30,Delay:0,Loop_Time:2,Is_Loop_Start:!1,Is_Loop_End:!1,Music_State:3,Music_Number:0};t.push(ha(o));var n={Pos:a,Speed:30,Delay:0,Loop_Time:2,Is_Loop_Start:!1,Is_Loop_End:!0,Music_State:3,Music_Number:0};t.push(ha(n));var i={Pos:a,Speed:30,Delay:0,Loop_Time:0,Is_Loop_Start:!1,Is_Loop_End:!1,Music_State:3,Music_Number:0};t.push(ha(i));var l=await this.robotTest.UploadActionInRobot(e,t);console.log(l)}},mounted(){}};const da=(0,d.Z)(pa,[["render",vt]]);var ma=da;const ga=(0,s.p7)({mode:"hash",history:(0,s.r5)(),routes:[{path:"/",name:"HomePage",component:g},{path:"/Convoy_Seven",name:"Convoy_Seven",component:$},{path:"/Bumblebee",name:"Bumblebee",component:he},{path:"/SteelCable",name:"SteelCable",component:Te},{path:"/Bluetooth",name:"Bluetooth",component:Ue},{path:"/BluetoothBumblebee",name:"BluetoothBumblebee",component:He},{path:"/BluetoothSteelCable",name:"BluetoothSteelCable",component:Qe},{path:"/BluetoothBazz",name:"BluetoothBazz",component:rt},{path:"/TestFactory",name:"TestFactory",component:ma}]});var fa=ga,va=a(2219);a(4415);const _a={id:"app"};function wa(e,t){const a=(0,r.up)("router-view");return(0,r.wg)(),(0,r.iD)("div",_a,[(0,r.Wm)(a)])}const ba={},Pa=(0,d.Z)(ba,[["render",wa]]);var ya=Pa;const ka=(0,r.ri)(ya);ka.use(fa),ka.use(va.Z),ka.mount("#app")},5832:function(){}},t={};function a(r){var s=t[r];if(void 0!==s)return s.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,a),o.exports}a.m=e,function(){var e=[];a.O=function(t,r,s,o){if(!r){var n=1/0;for(u=0;u<e.length;u++){r=e[u][0],s=e[u][1],o=e[u][2];for(var i=!0,l=0;l<r.length;l++)(!1&o||n>=o)&&Object.keys(a.O).every((function(e){return a.O[e](r[l])}))?r.splice(l--,1):(i=!1,o<n&&(n=o));if(i){e.splice(u--,1);var c=s();void 0!==c&&(t=c)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[r,s,o]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,r){var s,o,n=r[0],i=r[1],l=r[2],c=0;if(n.some((function(t){return 0!==e[t]}))){for(s in i)a.o(i,s)&&(a.m[s]=i[s]);if(l)var u=l(a)}for(t&&t(r);c<n.length;c++)o=n[c],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(u)},r=self["webpackChunkrobot_comm_model"]=self["webpackChunkrobot_comm_model"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=a.O(void 0,[998],(function(){return a(3209)}));r=a.O(r)})();
//# sourceMappingURL=app.4ba2f9a0.js.map